{"version":3,"file":"frontend/booking.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEE,WAAUA,CAAC,EAAG;EAEf,YAAY;;EACZ,MAAMC,aAAa,GAAG,EAAE;EACxB,MAAMC,aAAa,GAAG,EAAE;EACxB,IAAIC,UAAU,GAAG,EAAE;EACnB,MAAMC,SAAS,GAAG,EAAE;EACpB,MAAMC,SAAS,GAAG,EAAE;EACpB,IAAIC,WAAW,GAAG,KAAK;EAEvB,IAAIC,kBAAkB,GAAG,IAAI;EAC7B,IAAIC,6BAA6B,GAAG,IAAI;EACxC,IAAIC,yCAAyC,GAAG,IAAI;EACpD,IAAIC,+CAA+C,GAAG,IAAI;EAC1D,IAAIC,gBAAgB,GAAG,IAAI;EAC3B,IAAIC,eAAe,GAAG,IAAI;EAC1B,IAAIC,oBAAoB,GAAG,IAAI;EAC/B,IAAIC,kBAAkB,GAAG,IAAI;EAC7B,IAAIC,iBAAiB,GAAG,IAAI;EAC5B,IAAIC,sBAAsB,GAAG,IAAI;EACjC,IAAIC,uBAAuB,GAAG,IAAI;EAClC,IAAIC,kBAAkB,GAAG,IAAI;EAC7B,IAAIC,yBAAyB,GAAG,KAAK;EACrC,IAAIC,yBAAyB,GAAG,IAAI;EACpC,IAAIC,uBAAuB,GAAG,IAAI;EAClC,IAAIC,gCAAgC;EACpC,IAAIC,wBAAwB;EAC5B,IAAIC,4BAA4B,GAAG,IAAI;EACvC,IAAIC,eAAe,GAAG,IAAI;EAC1B,IAAIC,0BAA0B;EAC9B,IAAIC,sBAAsB;EAC1B,IAAIC,SAAS;EACb,IAAIC,mBAAmB;EACvB,MAAMC,gBAAgB,GAAG,CAAC,CAAC;EAC3B,IAAIC,YAAY,GAAG,CAAC;EAEpB/B,CAAC,CAACgC,EAAE,CAACC,iBAAiB,GAAG,YAAW;IACnC1B,kBAAkB,GAAGP,CAAC,CAAE,sBAAuB,CAAC;IAEhD,IAAKkC,SAAS,CAAE,WAAY,CAAC,EAAG;MAC/BN,SAAS,GAAGO,IAAI,CAACC,KAAK,CAAEF,SAAS,CAAE,WAAY,CAAE,CAAC;IACnD;IAEA,IAAK3B,kBAAkB,CAAC8B,MAAM,GAAG,CAAC,EAAG;MACpCrC,CAAC,CAACgC,EAAE,CAACM,2BAA2B,CAAC,CAAC;MAClCtC,CAAC,CAACgC,EAAE,CAACO,YAAY,CAAC,CAAC;MAEnB,IAAKX,SAAS,EAAG;QAChB5B,CAAC,CAAE,wBAAyB,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACa,UAAW,CAAC;QACzDzC,CAAC,CAAE,uBAAwB,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACc,SAAU,CAAC;QACvD1C,CAAC,CAAE,wBAAyB,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACe,KAAM,CAAC;QACpD3C,CAAC,CAAE,mBAAoB,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACgB,KAAM,CAAC;MAChD;IACD;IAEA,IAAKhB,SAAS,EAAG;MAChB;MACA5B,CAAC,CAAE,gCAAiC,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACa,UAAW,CAAC;MACjEzC,CAAC,CAAE,+BAAgC,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACc,SAAU,CAAC;MAC/D1C,CAAC,CAAE,2BAA4B,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACe,KAAM,CAAC;MACvD3C,CAAC,CAAE,2BAA4B,CAAC,CAACwC,GAAG,CAAEZ,SAAS,CAACgB,KAAM,CAAC;IACxD;EACD,CAAC;EAED5C,CAAC,CAACgC,EAAE,CAACM,2BAA2B,GAAG,YAAW;IAC7C1B,eAAe,GAAGL,kBAAkB,CAACsC,IAAI,CAAE,0BAA2B,CAAC;IACvElC,gBAAgB,GAAGJ,kBAAkB,CAACsC,IAAI,CAAE,2BAA4B,CAAC;IACzEhC,oBAAoB,GAAGN,kBAAkB,CAACsC,IAAI,CAAE,eAAgB,CAAC;IACjE/B,kBAAkB,GAAGP,kBAAkB,CAACsC,IAAI,CAAE,6BAA8B,CAAC;IAC7E9B,iBAAiB,GAAGR,kBAAkB,CAACsC,IAAI,CAAE,4BAA6B,CAAC;IAC3E5B,uBAAuB,GAAGV,kBAAkB,CAACsC,IAAI,CAAE,uBAAwB,CAAC;IAC5E7B,sBAAsB,GAAGT,kBAAkB,CAACsC,IAAI,CAAE,cAAe,CAAC;IAClErC,6BAA6B,GAAGD,kBAAkB,CAACsC,IAAI,CAAE,6BAA8B,CAAC;IACxF3B,kBAAkB,GAAGX,kBAAkB,CAACsC,IAAI,CAAE,uBAAwB,CAAC;IACvEzB,yBAAyB,GAAGb,kBAAkB,CAACsC,IAAI,CAAE,oCAAqC,CAAC;IAC3FxB,uBAAuB,GAAGd,kBAAkB,CAACsC,IAAI,CAAE,kCAAmC,CAAC;IACvFvB,gCAAgC,GAAGf,kBAAkB,CAACsC,IAAI,CAAE,2CAA4C,CAAC;IACzGrB,4BAA4B,GAAGjB,kBAAkB,CAACsC,IAAI,CAAE,4BAA6B,CAAC;IACtFpB,eAAe,GAAGlB,kBAAkB,CAACsC,IAAI,CAAE,qCAAsC,CAAC;IAClFnB,0BAA0B,GAAGnB,kBAAkB,CAACsC,IAAI,CAAE,sCAAuC,CAAC;IAC9F,MAAMC,aAAa,GAAGvC,kBAAkB,CAACsC,IAAI,CAAE,wBAAyB,CAAC;IACzEhB,mBAAmB,GAAGtB,kBAAkB,CAACsC,IAAI,CAAE,gBAAiB,CAAC;IACjEd,YAAY,GAAG/B,CAAC,CAAE,4CAA6C,CAAC,CAACwC,GAAG,CAAC,CAAC;IAEtE,IAAK1B,kBAAkB,CAACuB,MAAM,GAAG,CAAC,EAAG;MACpClB,yBAAyB,GAAG,IAAI;IACjC;IAEA,IAAK2B,aAAa,CAACT,MAAM,EAAG;MAC3BlC,UAAU,GAAG2C,aAAa,CAACN,GAAG,CAAC,CAAC,CAACO,KAAK,CAAE,GAAI,CAAC;IAC9C;EACD,CAAC;EAED/C,CAAC,CAACgD,cAAc,GAAG,IAAI;EACvBhD,CAAC,CAACiD,SAAS,GAAG,IAAI;EAClBjD,CAAC,CAACkD,oBAAoB,GAAG,UAAU;EACnClD,CAAC,CAACmD,qCAAqC,GAAG,YAAY;EACtDnD,CAAC,CAACoD,iBAAiB,GAAG,IAAI;EAC1B;EACA;EACA;EACA;EACA;EACApD,CAAC,CAACqD,2BAA2B,GAAG;IAC/B,OAAO,EAAE,UAAU;IACnB,OAAO,EAAE,UAAU;IACnB,OAAO,EAAE,UAAU;IACnB,OAAO,EAAE,UAAU;IACnB,OAAO,EAAE,UAAU;IACnB,OAAO,EAAE,UAAU;IACnB,WAAW,EAAE,YAAY;IACzB,WAAW,EAAE;EACd,CAAC;EACDrD,CAAC,CAACsD,uBAAuB,GAAG,EAAE;EAC9B,IAAIC,0BAA0B,GAAG,IAAI;EACrC,IAAIC,qBAAqB,GAAG,IAAI;EAChC,IAAIC,sBAAsB,GAAG,IAAI;EACjCzD,CAAC,CAAC0D,2BAA2B,GAAG,IAAI;EAEpC1D,CAAC,CAACgC,EAAE,CAACO,YAAY,GAAG,YAAW;IAC9B,IAAIoB,sBAAsB,GAAG,CAAC;IAC9B,MAAMC,QAAQ,GAAG,IAAIC,IAAI,CAAC,CAAC;IAC3B,MAAMC,iBAAiB,GAAG,IAAID,IAAI,CAAC,CAAC;IACpC,MAAME,0BAA0B,GAAGxD,kBAAkB,CAACsC,IAAI,CAAE,qCAAsC,CAAC;IACnG,MAAMmB,4BAA4B,GAAGzD,kBAAkB,CAACsC,IAAI,CAAE,uCAAwC,CAAC;IACvG;IACAU,0BAA0B,GAAGhD,kBAAkB,CAACsC,IAAI,CAAE,wCAAyC,CAAC,CAACL,GAAG,CAAC,CAAC;IACtG,MAAMyB,kCAAkC,GAAG1D,kBAAkB,CAACsC,IAAI,CAAE,6CAA8C,CAAC;IAEnH,IAAKnB,0BAA0B,CAACW,MAAM,GAAG,CAAC,EAAG;MAC5C,IAAI;QACHV,sBAAsB,GAAGQ,IAAI,CAACC,KAAK,CAAEV,0BAA0B,CAACc,GAAG,CAAC,CAAE,CAAC;QACvE;;QAEA;MACD,CAAC,CAAC,OAAQ0B,CAAC,EAAG;QACbvC,sBAAsB,GAAG,IAAI;MAC9B;IACD;IAEA,IAAKL,gCAAgC,CAACe,MAAM,EAAG;MAC9C,IAAI;QACHd,wBAAwB,GAAGY,IAAI,CAACC,KAAK,CAAEd,gCAAgC,CAACkB,GAAG,CAAC,CAAE,CAAC;QAC/E;MACD,CAAC,CAAC,OAAQ0B,CAAC,EAAG;QACb3C,wBAAwB,GAAG,IAAI;MAChC;IACD;;IAEA;IACAvB,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,CAAC,CAAC;IAE9B,IAAKF,kCAAkC,CAAC5B,MAAM,GAAG,CAAC,IAAI4B,kCAAkC,CAACzB,GAAG,CAAC,CAAC,KAAK,EAAE,IAAIyB,kCAAkC,CAACzB,GAAG,CAAC,CAAC,KAAK,IAAI,EAAG;MAC5J,IAAI;QACHxC,CAAC,CAAC0D,2BAA2B,GAAGvB,IAAI,CAACC,KAAK,CAAE6B,kCAAkC,CAACzB,GAAG,CAAC,CAAE,CAAC;QACtF;MACD,CAAC,CAAC,OAAQ0B,CAAC,EAAG;QACblE,CAAC,CAAC0D,2BAA2B,GAAG,IAAI;MACrC;IACD;;IAEA;IACA1D,CAAC,CAACoD,iBAAiB,GAAGpD,CAAC,CAACkD,oBAAoB;IAE5C,IAAKlD,CAAC,CAACqD,2BAA2B,CAAEe,cAAc,CAACC,gBAAgB,CAAE,KAAKC,SAAS,EAAG;MACrFtE,CAAC,CAACoD,iBAAiB,GAAGpD,CAAC,CAACqD,2BAA2B,CAAEe,cAAc,CAACC,gBAAgB,CAAE;IACvF;IAEArE,CAAC,CAACiD,SAAS,GAAGe,4BAA4B,CAACxB,GAAG,CAAC,CAAC;IAEhD,IAAKuB,0BAA0B,CAAC1B,MAAM,GAAG,CAAC,IAAI0B,0BAA0B,CAACvB,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;MACvFxC,CAAC,CAACgD,cAAc,GAAGb,IAAI,CAACC,KAAK,CAAE2B,0BAA0B,CAACvB,GAAG,CAAC,CAAE,CAAC;IAClE;;IAEA;IACA,IAAKpB,yBAAyB,CAACiB,MAAM,GAAG,CAAC,EAAG;MAC3C,IAAKjB,yBAAyB,CAACoB,GAAG,CAAC,CAAC,IAAI,EAAE,IAAI+B,QAAQ,CAAEnD,yBAAyB,CAACoB,GAAG,CAAC,CAAE,CAAC,KAAK,CAAC,EAAG;QACjGmB,sBAAsB,GAAGY,QAAQ,CAAEnD,yBAAyB,CAACoB,GAAG,CAAC,CAAE,CAAC;MACrE;IACD;IAEA,IAAKxC,CAAC,CAACgD,cAAc,KAAK,IAAI,EAAG;MAChC,IAAIwB,iBAAiB,GAAGxE,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEX,iBAAkB,CAAC;MAErF,OAAQ9D,CAAC,CAACgD,cAAc,CAAC0B,OAAO,CAAEF,iBAAkB,CAAC,GAAG,CAAC,CAAC,EAAG;QAC5DV,iBAAiB,CAACa,OAAO,CAAEb,iBAAiB,CAACc,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;QAC5DJ,iBAAiB,GAAGxE,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEX,iBAAkB,CAAC;MAClF;MAEAA,iBAAiB,CAACa,OAAO,CAAEb,iBAAiB,CAACc,OAAO,CAAC,CAAC,GAAGjB,sBAAuB,CAAC;;MAEjF;IACD,CAAC,MAAM;MACNG,iBAAiB,CAACa,OAAO,CAAEf,QAAQ,CAACgB,OAAO,CAAC,CAAC,GAAGjB,sBAAuB,CAAC;IACzE;IAEA,MAAMkB,kBAAkB,GAAG;MAC1BC,UAAU,EAAE9E,CAAC,CAACoD,iBAAiB;MAC/B2B,OAAO,EAAEjB,iBAAiB;MAC1BkB,SAAS,EAAElB,iBAAiB,CAACmB,WAAW,CAAC,CAAC,GAAG,GAAG,GAAGjF,CAAC,CAACiD;IACtD,CAAC;IAED,IAAKjD,CAAC,CAACgD,cAAc,KAAK,IAAI,EAAG;MAChC6B,kBAAkB,CAACK,aAAa,GAAG,UAAUC,IAAI,EAAG;QACnDA,IAAI,GAAGnF,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEU,IAAK,CAAC;QAEvD,MAAMT,OAAO,GAAG1E,CAAC,CAACgD,cAAc,CAAC0B,OAAO,CAAES,IAAK,CAAC;QAEhD,IAAKT,OAAO,GAAG,CAAC,CAAC,EAAG;UACnB,OAAO,CAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAE;QACzB;QACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,WAAW,CAAE;MACjC,CAAC;IACF;;IAEA;IACA,IAAKxD,kBAAkB,CAACmB,MAAM,GAAG,CAAC,EAAG;MACpC,OAAOnB,kBAAkB,CAACgE,aAAa;MACvC,IAAKE,MAAM,CAAC,CAAC,CAACC,UAAU,EAAG;QAC1BnE,kBAAkB,CAACmE,UAAU,CAAER,kBAAmB,CAAC;QACnD3D,kBAAkB,CAACmE,UAAU,CAAE,SAAS,EAAEvB,iBAAkB,CAAC;QAC7D,MAAMwB,QAAQ,GAAGf,QAAQ,CAAElD,uBAAuB,CAACmB,GAAG,CAAC,CAAE,CAAC;QAE1D,MAAM+C,iCAAiC,GAAG,SAAAA,CAAUJ,IAAI,EAAG;UAC1DnF,CAAC,CAACwF,kBAAkB,GAAG,EAAE;UAEzB,IAAKtE,kBAAkB,CAACsB,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;YACtC,MAAMiD,cAAc,GAAG,IAAI5B,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAExE,kBAAkB,CAACsB,GAAG,CAAC,CAAE,CAAE,CAAC;YACnG,MAAMmD,SAAS,GAAGF,cAAc;YAChC,MAAMG,UAAU,GAAG5F,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEgB,cAAe,CAAC;YAC7E,MAAMI,YAAY,GAAG,IAAIhC,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAExE,kBAAkB,CAACsB,GAAG,CAAC,CAAE,CAAE,CAAC;YACjGqD,YAAY,CAAClB,OAAO,CAAEc,cAAc,CAACb,OAAO,CAAC,CAAC,GAAGU,QAAS,CAAC;YAC3D,MAAMQ,QAAQ,GAAG9F,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEoB,YAAa,CAAC;YAEzE,OAAQF,SAAS,GAAGE,YAAY,EAAG;cAClC;cACA,MAAME,6BAA6B,GAAG/F,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEkB,SAAU,CAAC;cAC3F3F,CAAC,CAACwF,kBAAkB,CAACQ,IAAI,CAAED,6BAA8B,CAAC;cAC1DJ,SAAS,CAAChB,OAAO,CAAEgB,SAAS,CAACf,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;YAC7C;YAEAO,IAAI,GAAGnF,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEU,IAAK,CAAC;YACvD,MAAMT,OAAO,GAAG1E,CAAC,CAACwF,kBAAkB,CAACd,OAAO,CAAES,IAAK,CAAC;YAEpD,IAAKnF,CAAC,CAACgD,cAAc,KAAK,IAAI,EAAG;cAChC,MAAMiD,mBAAmB,GAAGjG,CAAC,CAACgD,cAAc,CAAC0B,OAAO,CAAES,IAAK,CAAC;cAE5D,IAAKT,OAAO,GAAG,CAAC,CAAC,EAAG;gBACnB,IAAKuB,mBAAmB,GAAG,CAAC,CAAC,EAAG;kBAC/B,IAAKd,IAAI,IAAIS,UAAU,EAAG;oBACzB,OAAO,CAAE,KAAK,EAAE,wBAAwB,EAAE,EAAE,CAAE;kBAC/C,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;oBAC9B,OAAO,CAAE,KAAK,EAAE,sBAAsB,EAAE,EAAE,CAAE;kBAC7C;kBACA,OAAO,CAAE,KAAK,EAAE,aAAa,EAAE,EAAE,CAAE;gBACpC;gBACA,IAAKX,IAAI,IAAIS,UAAU,EAAG;kBACzB,OAAO,CAAE,IAAI,EAAE,wBAAwB,EAAE,WAAW,CAAE;gBACvD,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;kBAC9B,OAAO,CAAE,IAAI,EAAE,sBAAsB,EAAE,WAAW,CAAE;gBACrD;gBACA,OAAO,CAAE,IAAI,EAAE,aAAa,EAAE,WAAW,CAAE;cAC5C;cACA,IAAKG,mBAAmB,GAAG,CAAC,CAAC,EAAG;gBAC/B,OAAO,CAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAE;cACzB;cACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,WAAW,CAAE;YACjC;YACA,IAAKvB,OAAO,GAAG,CAAC,CAAC,EAAG;cACnB,IAAKS,IAAI,IAAIS,UAAU,EAAG;gBACzB,OAAO,CAAE,IAAI,EAAE,wBAAwB,EAAE,EAAE,CAAE;cAC9C,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;gBAC9B,OAAO,CAAE,IAAI,EAAE,sBAAsB,EAAE,EAAE,CAAE;cAC5C;cACA,OAAO,CAAE,IAAI,EAAE,aAAa,EAAE,EAAE,CAAE;YACnC;YACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAE;UACxB;UACAX,IAAI,GAAGnF,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEU,IAAK,CAAC;UACvD,IAAKnF,CAAC,CAACgD,cAAc,KAAK,IAAI,EAAG;YAChC,MAAM0B,OAAO,GAAG1E,CAAC,CAACgD,cAAc,CAAC0B,OAAO,CAAES,IAAK,CAAC;YAEhD,IAAKT,OAAO,GAAG,CAAC,CAAC,EAAG;cACnB,OAAO,CAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAE;YACzB;YACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,WAAW,CAAE;UACjC;UACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,WAAW,CAAE;QACjC,CAAC;QAEDxD,kBAAkB,CAACmE,UAAU,CAAE,QAAQ,EAAE,eAAe,EAAEE,iCAAkC,CAAC;QAC7FrE,kBAAkB,CAACmE,UAAU,CAAE,QAAQ,EAAE,SAAS,EAAE,UAAUF,IAAI,EAAG;UACpEnF,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,CAAC,CAAC;QAC/B,CAAE,CAAC;MACJ;IACD;;IAEA;IACA,IAAK3D,6BAA6B,CAAC6B,MAAM,GAAG,CAAC,EAAG;MAC/CmB,qBAAqB,GAAGhD,6BAA6B,CAACqC,IAAI,CAAE,gCAAiC,CAAC;MAC9FY,sBAAsB,GAAGjD,6BAA6B,CAACqC,IAAI,CAAE,iCAAkC,CAAC;MAEhG,IAAKuC,MAAM,CAAC,CAAC,CAACC,UAAU,EAAG;QAC1B7B,qBAAqB,CAAC6B,UAAU,CAAER,kBAAmB,CAAC;QAEtDrB,qBAAqB,CAAC6B,UAAU,CAAE,QAAQ,EAAE,SAAS,EAAE,UAAUF,IAAI,EAAG;UACvEnF,CAAC,CAACgC,EAAE,CAACkE,wBAAwB,CAAC,CAAC;UAC/B;UACA,IAAKf,IAAI,KAAK,EAAE,EAAG;YAClB,MAAMQ,SAAS,GAAG,IAAI9B,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAEP,IAAK,CAAE,CAAC;YAE1EQ,SAAS,CAAChB,OAAO,CAAEgB,SAAS,CAACf,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;YAE5CnB,sBAAsB,CAAC4B,UAAU,CAAE,QAAQ,EAAE,SAAS,EAAEM,SAAU,CAAC;YAEnE3F,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,CAAC,CAAC;YAE9B,IAAKgB,IAAI,KAAKnF,CAAC,CAACsD,uBAAuB,EAAG;cACzCtD,CAAC,CAACsD,uBAAuB,GAAG6B,IAAI;YACjC;UACD;QACD,CAAE,CAAC;QAEH1B,sBAAsB,CAAC4B,UAAU,CAAE;UAClCP,UAAU,EAAE9E,CAAC,CAACoD,iBAAiB;UAC/B2B,OAAO,EAAEjB,iBAAiB;UAC1BkB,SAAS,EAAElB,iBAAiB,CAACmB,WAAW,CAAC,CAAC,GAAG,GAAG,GAAGjF,CAAC,CAACiD;QACtD,CAAE,CAAC;QAEHQ,sBAAsB,CAAC4B,UAAU,CAAE,QAAQ,EAAE,SAAS,EAAE,UAAUF,IAAI,EAAG;UACxEnF,CAAC,CAACgC,EAAE,CAACkE,wBAAwB,CAAC,CAAC;UAC/BlG,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,CAAC,CAAC;QAC/B,CAAE,CAAC;MACJ;IACD;;IAEA;IACA1D,yCAAyC,GAAGF,kBAAkB,CAACsC,IAAI,CAAE,yCAA0C,CAAC;IAChH,IAAKpC,yCAAyC,CAAC4B,MAAM,GAAG,CAAC,EAAG;MAC3D3B,+CAA+C,GAAGD,yCAAyC,CAACoC,IAAI,CAAE,oDAAqD,CAAC;MAExJ,MAAMsD,uBAAuB,GAAG;QAC/BpB,OAAO,EAAEjB,iBAAiB;QAC1BsC,KAAK,EAAE,MAAM;QACbC,KAAK,EAAE,IAAI;QACXC,MAAM,EAAE;UACPC,MAAM,EAAEvG,CAAC,CAACmD;QACX;MACD,CAAC;MAEDzC,+CAA+C,CAAC8F,eAAe,CAAEL,uBAAuB,EAAE,UAAUM,KAAK,EAAEC,GAAG,EAAG;QAChH;MAAA,CACC,CAAC;IACJ;IAEA,IAAKzF,uBAAuB,CAACoB,MAAM,GAAG,CAAC,EAAG;MACzCpB,uBAAuB,CAAC0F,EAAE,CAAE,cAAc,EAAE,UAAUC,CAAC,EAAG;QACzD5G,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,CAAC,CAAC;MAC/B,CAAE,CAAC;IACJ;EACD,CAAC;EAEDnE,CAAC,CAACgC,EAAE,CAAC6E,uBAAuB,GAAG,YAAW;IACzC/E,gBAAgB,CAACgF,mBAAmB,GAAGC,UAAU,CAAEnG,eAAe,CAAC4B,GAAG,CAAC,CAAE,CAAC;IAE1E,IAAKrB,yBAAyB,EAAG;MAChCW,gBAAgB,CAACkF,iBAAiB,GAAGD,UAAU,CAAEhG,iBAAiB,CAACyB,GAAG,CAAC,CAAE,CAAC;IAC3E;;IAEA;IACA,IAAKb,sBAAsB,EAAG;MAC7B3B,CAAC,CAACiH,IAAI,CAAEtF,sBAAsB,EAAE,UAAUuF,WAAW,EAAEC,SAAS,EAAG;QAClE,IAAKA,SAAS,CAACC,SAAS,IAAI,CAAC,IAAID,SAAS,CAACE,MAAM,IAAI,CAAC,EAAG;UACxD,IAAK,CAAEvF,gBAAgB,CAAEoF,WAAW,CAAE,EAAG;YACxCpF,gBAAgB,CAAEoF,WAAW,CAAE,GAAG,CAAC,CAAC;UACrC;UAEAlH,CAAC,CAACiH,IAAI,CAAEE,SAAS,CAACG,cAAc,EAAE,UAAUC,MAAM,EAAEC,SAAS,EAAG;YAC/D1F,gBAAgB,CAAEoF,WAAW,CAAE,CAAEK,MAAM,CAAE,GAAGR,UAAU,CAAES,SAAS,CAACC,KAAM,CAAC;UAC1E,CAAE,CAAC;QACJ;MACD,CAAE,CAAC;IACJ;EACD,CAAC;EAEDzH,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,GAAG,YAAW;IACzCnE,CAAC,CAACgC,EAAE,CAAC6E,uBAAuB,CAAC,CAAC;IAE9B,IAAIa,QAAQ,GAAG,CAAC;IAChB,MAAMzG,uBAAuB,GAAGjB,CAAC,CAAE,uBAAwB,CAAC;IAC5D,IAAI2H,YAAY,GAAG,CAAC;IACpB,MAAMC,WAAW,GAAGrD,QAAQ,CAAE5D,gBAAgB,CAAC6B,GAAG,CAAC,CAAE,CAAC;IACtDmF,YAAY,IAAIC,WAAW;IAE3B,IAAIC,WAAW,GAAG,CAAC;IACnB,IAAK/G,kBAAkB,CAACuB,MAAM,EAAG;MAChCwF,WAAW,GAAGtD,QAAQ,CAAEzD,kBAAkB,CAAC0B,GAAG,CAAC,CAAE,CAAC;MAClDmF,YAAY,IAAIE,WAAW;IAC5B;;IAEA;IACA,MAAMC,eAAe,GAAGtE,qBAAqB,IAAIA,qBAAqB,CAACnB,MAAM,IAAIoB,sBAAsB,IAAIA,sBAAsB,CAACpB,MAAM,IACvImB,qBAAqB,CAAChB,GAAG,CAAC,CAAC,KAAK,EAAE,IAAIiB,sBAAsB,CAACjB,GAAG,CAAC,CAAC,KAAK,EAAE;IAE1E,MAAMuF,sBAAsB,GAAG/H,CAAC,CAAC0D,2BAA2B,IAAI1D,CAAC,CAAC0D,2BAA2B,CAACsE,iBAAiB,IAAI,CAAEhI,CAAC,CAACiI,aAAa,CAAEjI,CAAC,CAAC0D,2BAA2B,CAACsE,iBAAkB,CAAC;IAEvL,IAAIE,aAAa;IACjB,IAAIC,cAAc;IAClB,IAAKjH,kBAAkB,CAACmB,MAAM,IAAInB,kBAAkB,CAACsB,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;MAAE;MACrE,MAAM8C,QAAQ,GAAGyB,UAAU,CAAE1F,uBAAuB,CAACmB,GAAG,CAAC,CAAE,CAAC;MAC5D0F,aAAa,GAAG,IAAIrE,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAExE,kBAAkB,CAACsB,GAAG,CAAC,CAAE,CAAE,CAAC;MAC5F2F,cAAc,GAAGC,eAAe,CAACF,aAAa,CAAC;MAC/C,IAAK5C,QAAQ,GAAG,CAAC,EAAG;QACnB6C,cAAc,CAACxD,OAAO,CAAEwD,cAAc,CAACvD,OAAO,CAAC,CAAC,GAAGU,QAAS,CAAC;MAC9D,CAAC,MAAM,IAAKA,QAAQ,KAAK,CAAC,EAAG;QAC5B6C,cAAc,CAACxD,OAAO,CAAEwD,cAAc,CAACvD,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;MACvD;IACD,CAAC,MAAM,IAAKkD,eAAe,EAAG;MAC7BI,aAAa,GAAG,IAAIrE,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAElC,qBAAqB,CAAChB,GAAG,CAAC,CAAE,CAAE,CAAC;MAC/F2F,cAAc,GAAG,IAAItE,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAEjC,sBAAsB,CAACjB,GAAG,CAAC,CAAE,CAAE,CAAC;IAClG;IAEA,IAAK,CAAE0F,aAAa,IAAK,CAAEC,cAAc,EAAG;MAC3C;IACD;IAEA,IAAIxC,SAAS,GAAGyC,eAAe,CAACF,aAAa,CAAC;IAC9C,MAAMG,oBAAoB,GAAG,CAAC,CAAC;;IAE/B;IACA,MAAMC,WAAW,GAAGtI,CAAC,CAACgC,EAAE,CAACuG,sBAAsB,CAAEL,aAAa,EAAEC,cAAe,CAAC;IAChF;IACA,MAAMK,aAAa,GAAGxI,CAAC,CAAE,aAAc,CAAC;IACxCwI,aAAa,CAACC,IAAI,CAAEH,WAAY,CAAC;IAEjC,OAAQ3C,SAAS,GAAGwC,cAAc,EAAG;MACpC,IAAKJ,sBAAsB,EAAG;QAC7B,MAAMW,gBAAgB,GAAG,EAAE;QAC3B1I,CAAC,CAACiH,IAAI,CAAEjH,CAAC,CAAC0D,2BAA2B,CAACsE,iBAAiB,EAAE,UAAUW,mBAAmB,EAAEX,iBAAiB,EAAG;UAC3G,MAAMY,SAAS,GAAG,IAAI/E,IAAI,CAAEmE,iBAAiB,CAACpC,UAAW,CAAC;UAC1D,MAAMiD,OAAO,GAAG,IAAIhF,IAAI,CAAEmE,iBAAiB,CAAClC,QAAS,CAAC;UAEtD,IAAKH,SAAS,IAAIiD,SAAS,IAAIjD,SAAS,IAAIkD,OAAO,EAAG;YACrDH,gBAAgB,CAAC1C,IAAI,CAAEL,SAAU,CAAC;YAClC3F,CAAC,CAACiH,IAAI,CAAEe,iBAAiB,CAACc,MAAM,EAAE,UAAUC,OAAO,EAAEC,OAAO,EAAG;cAC9D,IAAKlH,gBAAgB,CAAEiH,OAAO,CAAE,EAAG;gBAClC,IAAKA,OAAO,KAAK,qBAAqB,IAAIA,OAAO,KAAK,mBAAmB,EAAG;kBAC3E,IAAIE,UAAU,GAAGlC,UAAU,CAAEiC,OAAO,CAACvB,KAAM,CAAC;kBAE5C,IAAKyB,KAAK,CAAED,UAAW,CAAC,IAAIA,UAAU,IAAI,CAAC,EAAG;oBAC7CA,UAAU,GAAGnH,gBAAgB,CAAEiH,OAAO,CAAE;kBACzC;kBAEA,IAAK,CAAEV,oBAAoB,CAAEU,OAAO,CAAE,EAAG;oBACxCV,oBAAoB,CAAEU,OAAO,CAAE,GAAGE,UAAU;kBAC7C,CAAC,MAAM;oBACNZ,oBAAoB,CAAEU,OAAO,CAAE,IAAIE,UAAU;kBAC9C;gBACD,CAAC,MAAM;kBACN;kBACAjJ,CAAC,CAACiH,IAAI,CAAE+B,OAAO,EAAE,UAAU9B,WAAW,EAAEI,cAAc,EAAG;oBACxD,IAAKxF,gBAAgB,CAAEiH,OAAO,CAAE,CAAE7B,WAAW,CAAE,EAAG;sBACjD,IAAI+B,UAAU,GAAGlC,UAAU,CAAEO,cAAc,CAACG,KAAM,CAAC;sBAEnD,IAAKyB,KAAK,CAAED,UAAW,CAAC,IAAIA,UAAU,IAAI,CAAC,EAAG;wBAC7CA,UAAU,GAAGnH,gBAAgB,CAAEiH,OAAO,CAAE,CAAE7B,WAAW,CAAE;sBACxD;sBAEA,IAAK,CAAEmB,oBAAoB,CAAEU,OAAO,CAAE,EAAG;wBACxCV,oBAAoB,CAAEU,OAAO,CAAE,GAAG,CAAC,CAAC;sBACrC;sBAEA,IAAK,CAAEV,oBAAoB,CAAEU,OAAO,CAAE,CAAE7B,WAAW,CAAE,EAAG;wBACvDmB,oBAAoB,CAAEU,OAAO,CAAE,CAAE7B,WAAW,CAAE,GAAG+B,UAAU;sBAC5D,CAAC,MAAM;wBACNZ,oBAAoB,CAAEU,OAAO,CAAE,CAAE7B,WAAW,CAAE,IAAI+B,UAAU;sBAC7D;oBACD;kBACD,CAAE,CAAC;gBACJ;cACD;YACD,CAAE,CAAC;UACJ;QACD,CAAE,CAAC;;QAEH;QACA,IAAKP,gBAAgB,CAAChE,OAAO,CAAEiB,SAAU,CAAC,KAAK,CAAC,CAAC,EAAG;UACnD3F,CAAC,CAACgC,EAAE,CAACmH,+BAA+B,CAAEd,oBAAoB,EAAEvG,gBAAiB,CAAC;QAC/E;MACD,CAAC,MAAM;QACN;QACA9B,CAAC,CAACgC,EAAE,CAACmH,+BAA+B,CAAEd,oBAAoB,EAAEvG,gBAAiB,CAAC;MAC/E;MAEA6D,SAAS,CAAChB,OAAO,CAAEgB,SAAS,CAACf,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;IAC7C;;IAEA;;IAEA;IACA9C,gBAAgB,CAACgF,mBAAmB,GAAGuB,oBAAoB,CAACvB,mBAAmB;IAC/EhF,gBAAgB,CAACkF,iBAAiB,GAAGqB,oBAAoB,CAACrB,iBAAiB,IAAI1C,SAAS,GAAG,CAAC,GAAG+D,oBAAoB,CAACrB,iBAAiB;;IAErI;IACA;IACAhH,CAAC,CAACiH,IAAI,CAAEnF,gBAAgB,EAAE,UAAUiH,OAAO,EAAEC,OAAO,EAAG;MACtD,IAAKD,OAAO,KAAK,qBAAqB,IAAIA,OAAO,KAAK,mBAAmB,EAAG;QAC3E/I,CAAC,CAACiH,IAAI,CAAE+B,OAAO,EAAE,UAAUzB,MAAM,EAAE6B,MAAM,EAAG;UAC3C,IAAKf,oBAAoB,CAAEU,OAAO,CAAE,IAAIV,oBAAoB,CAAEU,OAAO,CAAE,CAAExB,MAAM,CAAE,EAAG;YACnFzF,gBAAgB,CAAEiH,OAAO,CAAE,CAAExB,MAAM,CAAE,GAAGc,oBAAoB,CAAEU,OAAO,CAAE,CAAExB,MAAM,CAAE;UAClF;QACD,CAAE,CAAC;MACJ;IACD,CAAE,CAAC;IACH;;IAEA;;IAEA;IACAvH,CAAC,CAACiH,IAAI,CAAEnF,gBAAgB,EAAE,UAAUuH,CAAC,EAAEC,CAAC,EAAG;MAC1C,IAAKD,CAAC,IAAI,qBAAqB,EAAG;QACjC,MAAME,eAAe,GAAGzH,gBAAgB,CAAEuH,CAAC,CAAE,GAAGzB,WAAW;QAC3DF,QAAQ,IAAI6B,eAAe;QAE3B1I,oBAAoB,CAAC4H,IAAI,CAAEzI,CAAC,CAACgC,EAAE,CAACwH,iBAAiB,CAAE1H,gBAAgB,CAAEuH,CAAC,CAAG,CAAE,CAAC;MAC7E,CAAC,MAAM,IAAKA,CAAC,IAAI,mBAAmB,EAAG;QACtC,MAAMI,eAAe,GAAG3H,gBAAgB,CAAEuH,CAAC,CAAE,GAAGxB,WAAW;QAC3DH,QAAQ,IAAI+B,eAAe;QAE3BzI,sBAAsB,CAACyH,IAAI,CAAEzI,CAAC,CAACgC,EAAE,CAACwH,iBAAiB,CAAE1H,gBAAgB,CAAEuH,CAAC,CAAG,CAAE,CAAC;MAC/E,CAAC,MAAM;QACNrJ,CAAC,CAACiH,IAAI,CAAEqC,CAAC,EAAE,UAAUpC,WAAW,EAAEK,MAAM,EAAG;UAC1C,IAAImC,eAAe,GAAG5H,gBAAgB,CAAEuH,CAAC,CAAE,CAAEnC,WAAW,CAAE;UAE1D,QAASvF,sBAAsB,CAAE0H,CAAC,CAAE,CAACM,cAAc;YACnD,KAAK,UAAU;cACd,IAAIC,YAAY,GAAGrF,QAAQ,CAAEvE,CAAC,CAAE,aAAa,GAAGkH,WAAW,GAAG,GAAI,CAAC,CAAC1E,GAAG,CAAC,CAAE,CAAC;cAC3E,IAAIqH,mBAAmB,GAAGH,eAAe,GAAGE,YAAY;cACxDlC,QAAQ,IAAImC,mBAAmB;cAC/B;YACD,KAAK,UAAU;cACd,IAAIC,WAAW,GAAG9J,CAAC,CAAE,aAAa,GAAGkH,WAAW,GAAG,GAAI,CAAC;cAExD,IAAK4C,WAAW,CAACC,EAAE,CAAE,UAAW,CAAC,EAAG;gBACnCrC,QAAQ,IAAIgC,eAAe;cAC5B;cACA;YACD,KAAK,OAAO;cACX,IAAII,WAAW,GAAG9J,CAAC,CAAE,aAAa,GAAGqJ,CAAC,GAAG,WAAY,CAAC;cAEtD,IAAKS,WAAW,CAACtH,GAAG,CAAC,CAAC,IAAI0E,WAAW,EAAG;gBACvC,IAAIwC,eAAe,GAAG5H,gBAAgB,CAAEuH,CAAC,CAAE,CAAEnC,WAAW,CAAE;gBAE1DQ,QAAQ,IAAIgC,eAAe;cAC5B;cACA;YACD,KAAK,QAAQ;cACZ,IAAIM,eAAe,GAAGhK,CAAC,CAAE,cAAc,GAAGqJ,CAAC,GAAG,GAAI,CAAC,CAAC7G,GAAG,CAAC,CAAC;cAEzD,IAAKwH,eAAe,IAAI9C,WAAW,IAAIpF,gBAAgB,CAAEuH,CAAC,CAAE,CAAEW,eAAe,CAAE,EAAG;gBACjFtC,QAAQ,IAAIgC,eAAe;cAC5B;cACA;YACD;cACC;UACD;UAEA1J,CAAC,CAAE,SAAS,GAAGkH,WAAY,CAAC,CAACuB,IAAI,CAAEzI,CAAC,CAACgC,EAAE,CAACwH,iBAAiB,CAAEE,eAAgB,CAAE,CAAC;QAC/E,CAAE,CAAC;MACJ;IACD,CAAE,CAAC;;IAEH;IACA,IAAKnI,wBAAwB,EAAG;MAC/B,MAAM0I,oBAAoB,GAAGzI,4BAA4B,CAACqB,IAAI,CAAE,eAAgB,CAAC;MACjF,MAAMqH,0BAA0B,GAAG1I,4BAA4B,CAACqB,IAAI,CAAE,mCAAoC,CAAC;MAC3G,MAAMsH,oBAAoB,GAAG3I,4BAA4B,CAACqB,IAAI,CAAE,eAAgB,CAAC;MAEjF,IAAI;QACH,IAAIuH,qBAAqB,GAAG,CAAC;QAC7B,IAAIC,YAAY,GAAG,CAAC;QAEpBrK,CAAC,CAACiH,IAAI,CAAE1F,wBAAwB,EAAE,UAAU8H,CAAC,EAAEC,CAAC,EAAG;UAClD,MAAMgB,eAAe,GAAG/F,QAAQ,CAAE+E,CAAC,CAACgB,eAAgB,CAAC;UAErD,IAAKA,eAAe,IAAI3C,YAAY,IAAIyC,qBAAqB,GAAGE,eAAe,EAAG;YACjFF,qBAAqB,GAAGE,eAAe;YACvCD,YAAY,GAAGf,CAAC,CAACiB,QAAQ;UAC1B;QACD,CAAE,CAAC;QAEH,IAAKH,qBAAqB,KAAK,CAAC,EAAG;UAClC,MAAMI,MAAM,GAAG,KAAK;UAEpBP,oBAAoB,CAACxB,IAAI,CAAE4B,YAAa,CAAC;UACzCF,oBAAoB,CAAC1B,IAAI,CAAEd,YAAa,CAAC;UACzCnG,4BAA4B,CAACiJ,IAAI,CAAC,CAAC;UAEnC,IAAKD,MAAM,CAACE,IAAI,CAAEL,YAAa,CAAC,EAAG;YAClCH,0BAA0B,CAACS,IAAI,CAAC,CAAC;YACjCN,YAAY,GAAGtD,UAAU,CAAEsD,YAAa,CAAC;YAEzC3C,QAAQ,GAAGA,QAAQ,GAAKA,QAAQ,GAAG2C,YAAY,GAAG,GAAK;UACxD,CAAC,MAAM;YACNA,YAAY,GAAGtD,UAAU,CAAEsD,YAAa,CAAC;YACzCJ,oBAAoB,CAACxB,IAAI,CAAE4B,YAAY,CAACO,OAAO,CAAE7I,YAAa,CAAE,CAAC;YACjEmI,0BAA0B,CAACO,IAAI,CAAC,CAAC;YACjC/C,QAAQ,GAAGA,QAAQ,GAAG2C,YAAY;UACnC;QACD,CAAC,MAAM;UACN7I,4BAA4B,CAACmJ,IAAI,CAAC,CAAC;QACpC;MACD,CAAC,CAAC,OAAQzG,CAAC,EAAG;QACb2G,OAAO,CAACC,KAAK,CAAE5G,CAAE,CAAC;MACnB;IACD;IAEArC,mBAAmB,CAAC4G,IAAI,CAAEzI,CAAC,CAACgC,EAAE,CAACwH,iBAAiB,CAAE9B,QAAS,CAAE,CAAC;EAC/D,CAAC;EAED1H,CAAC,CAACgC,EAAE,CAACmH,+BAA+B,GAAG,UAAUd,oBAAoB,EAAEvG,gBAAgB,EAAG;IACzF,IAAK,CAAEuG,oBAAoB,CAACvB,mBAAmB,EAAG;MACjDuB,oBAAoB,CAACvB,mBAAmB,GAAGhF,gBAAgB,CAACgF,mBAAmB;IAChF,CAAC,MAAM;MACNuB,oBAAoB,CAACvB,mBAAmB,IAAIhF,gBAAgB,CAACgF,mBAAmB;IACjF;IAEA,IAAK,CAAEuB,oBAAoB,CAACrB,iBAAiB,EAAG;MAC/CqB,oBAAoB,CAACrB,iBAAiB,GAAGlF,gBAAgB,CAACkF,iBAAiB;IAC5E,CAAC,MAAM;MACNqB,oBAAoB,CAACrB,iBAAiB,IAAIlF,gBAAgB,CAACkF,iBAAiB;IAC7E;;IAEA;IACAhH,CAAC,CAACiH,IAAI,CAAEnF,gBAAgB,EAAE,UAAUiH,OAAO,EAAEC,OAAO,EAAG;MACtD,IAAKD,OAAO,IAAI,qBAAqB,IAAIA,OAAO,IAAI,mBAAmB,EAAG;QACzE/I,CAAC,CAACiH,IAAI,CAAE+B,OAAO,EAAE,UAAUzB,MAAM,EAAE6B,MAAM,EAAG;UAC3C,IAAK,CAAEf,oBAAoB,CAAEU,OAAO,CAAE,EAAG;YACxCV,oBAAoB,CAAEU,OAAO,CAAE,GAAG,CAAC,CAAC;UACrC;UAEA,IAAK,CAAEV,oBAAoB,CAAEU,OAAO,CAAE,CAAExB,MAAM,CAAE,EAAG;YAClDc,oBAAoB,CAAEU,OAAO,CAAE,CAAExB,MAAM,CAAE,GAAGzF,gBAAgB,CAAEiH,OAAO,CAAE,CAAExB,MAAM,CAAE;UAClF,CAAC,MAAM;YACNc,oBAAoB,CAAEU,OAAO,CAAE,CAAExB,MAAM,CAAE,IAAIzF,gBAAgB,CAAEiH,OAAO,CAAE,CAAExB,MAAM,CAAE;UACnF;QACD,CAAE,CAAC;MACJ;IACD,CAAE,CAAC;EACJ,CAAC;EAEDvH,CAAC,CAACgC,EAAE,CAAC+I,mBAAmB,GAAG,YAAW;IACrC/K,CAAC,CAAE,cAAe,CAAC,CAAC2G,EAAE,CAAE,OAAO,EAAE,UAAUzC,CAAC,EAAG;MAC9CA,CAAC,CAAC8G,cAAc,CAAC,CAAC;MAClB,MAAMC,cAAc,GAAGjL,CAAC,CAAE,IAAK,CAAC;MAChC,IAAIkL,WAAW,GAAG,KAAK;MACvB,MAAMC,gBAAgB,GAAGnL,CAAC,CAAE,wBAAyB,CAAC;MACtD,MAAMoL,eAAe,GAAGpL,CAAC,CAAE,uBAAwB,CAAC;MACpD,MAAMqL,WAAW,GAAGrL,CAAC,CAAE,wBAAyB,CAAC;MACjD,MAAMsL,WAAW,GAAGtL,CAAC,CAAE,mBAAoB,CAAC;MAC5C,MAAMuL,SAAS,GAAGvL,CAAC,CAAE,2BAA4B,CAAC;MAClD,MAAMwL,QAAQ,GAAGjH,QAAQ,CAAEgH,SAAS,CAAC/I,GAAG,CAAC,CAAE,CAAC;MAC5C,MAAMiJ,gBAAgB,GAAGzL,CAAC,CAAE,sBAAuB,CAAC,CAACwC,GAAG,CAAC,CAAC;MAC1D,MAAMkJ,gBAAgB,GAAG1L,CAAC,CAAE,2BAA4B,CAAC;MACzD,MAAM2L,WAAW,GAAGpH,QAAQ,CAAEgH,SAAS,CAACK,IAAI,CAAE,KAAM,CAAE,CAAC;MACvD,MAAMC,sBAAsB,GAAG7L,CAAC,CAAE,sBAAuB,CAAC;MAC1D;;MAEA,IAAKmL,gBAAgB,CAAC9I,MAAM,GAAG,CAAC,EAAG;QAClC,IAAK8I,gBAAgB,CAAC3I,GAAG,CAAC,CAAC,CAACH,MAAM,IAAI,CAAC,EAAG;UACzC8I,gBAAgB,CAACS,IAAI,CAAE,aAAa,EAAExH,cAAc,CAAC0H,qBAAsB,CAAC;UAC5EX,gBAAgB,CAACY,QAAQ,CAAE,OAAQ,CAAC;UACpC;QACD;MACD;MAEA,IAAKX,eAAe,CAAC/I,MAAM,GAAG,CAAC,EAAG;QACjC,IAAK+I,eAAe,CAAC5I,GAAG,CAAC,CAAC,CAACH,MAAM,IAAI,CAAC,EAAG;UACxC+I,eAAe,CAACQ,IAAI,CAAE,aAAa,EAAExH,cAAc,CAAC4H,oBAAqB,CAAC;UAC1EZ,eAAe,CAACW,QAAQ,CAAE,OAAQ,CAAC;UACnC;QACD;MACD;MAEA,IAAKV,WAAW,CAAChJ,MAAM,GAAG,CAAC,EAAG;QAC7B,IAAK,CAAE4J,kBAAkB,CAAEZ,WAAW,CAAC7I,GAAG,CAAC,CAAE,CAAC,EAAG;UAChD6I,WAAW,CAACO,IAAI,CAAE,aAAa,EAAExH,cAAc,CAAC8H,gBAAiB,CAAC;UAClEb,WAAW,CAACU,QAAQ,CAAE,OAAQ,CAAC;UAC/BV,WAAW,CAAC7I,GAAG,CAAE,EAAG,CAAC;UACrB;QACD;MACD;MAEA,IAAK8I,WAAW,CAACjJ,MAAM,GAAG,CAAC,EAAG;QAC7B,IAAKiJ,WAAW,CAAC9I,GAAG,CAAC,CAAC,CAACH,MAAM,IAAI,CAAC,EAAG;UACpCiJ,WAAW,CAACM,IAAI,CAAE,aAAa,EAAExH,cAAc,CAAC+H,gBAAiB,CAAC;UAClEb,WAAW,CAACS,QAAQ,CAAE,OAAQ,CAAC;UAC/B;QACD;MACD;MAEA,IAAK7K,kBAAkB,CAACmB,MAAM,GAAG,CAAC,EAAG;QACpC,IAAKnB,kBAAkB,CAACsB,GAAG,CAAC,CAAC,CAACH,MAAM,IAAI,CAAC,EAAG;UAC3CnB,kBAAkB,CAAC0K,IAAI,CAAE,aAAa,EAAExH,cAAc,CAACgI,eAAgB,CAAC;UACxElL,kBAAkB,CAAC6K,QAAQ,CAAE,OAAQ,CAAC;UACtC;QACD;MACD;MAEA,IAAK7C,KAAK,CAAEsC,QAAS,CAAC,IAAIA,QAAQ,IAAI,CAAC,EAAG;QACzCD,SAAS,CAAC/I,GAAG,CAAE,CAAE,CAAC;MACnB,CAAC,MAAM,IAAKgJ,QAAQ,GAAGG,WAAW,EAAG;QACpC;MACD;MAEA,SAASM,kBAAkBA,CAAEtJ,KAAK,EAAG;QACpC,MAAM0J,KAAK,GAAG,+DAA+D;QAC7E,OAAOA,KAAK,CAAC3B,IAAI,CAAE/H,KAAM,CAAC;MAC3B;;MAEA;MACA,IAAK,CAAEsI,cAAc,CAACqB,QAAQ,CAAE,SAAU,CAAC,EAAG;QAC7C,MAAMC,IAAI,GAAG;UACZC,KAAK,EAAExM,CAAC,CAAE,mBAAoB,CAAC,CAACwC,GAAG,CAAC,CAAC;UACrCiK,OAAO,EAAEzM,CAAC,CAAE,qBAAsB,CAAC,CAACwC,GAAG,CAAC,CAAC;UACzCkK,YAAY,EAAExL,kBAAkB,CAACsB,GAAG,CAAC;QACtC,CAAC;QAED+J,IAAI,CAACI,aAAa,GAAGpB,SAAS,CAAC/I,GAAG,CAAC,CAAC;;QAEpC;QACA,IAAK1B,kBAAkB,CAACuB,MAAM,GAAG,CAAC,EAAG;UACpC,IAAIuK,eAAe,GAAG9L,kBAAkB,CAAC0B,GAAG,CAAC,CAAC;UAE9C,IAAK0G,KAAK,CAAE0D,eAAgB,CAAC,IAAI7F,UAAU,CAAE6F,eAAgB,CAAC,GAAG,CAAC,EAAG;YACpEA,eAAe,GAAG,CAAC;UACpB;UAEAL,IAAI,CAACK,eAAe,GAAGA,eAAe;QACvC;;QAEA;QACA,IAAKlL,0BAA0B,CAACW,MAAM,GAAG,CAAC,EAAG;UAC5CkK,IAAI,CAACM,eAAe,GAAG,CAAC,CAAC;UAEzB7M,CAAC,CAACiH,IAAI,CAAE4E,sBAAsB,EAAE,UAAUjF,CAAC,EAAG;YAC7C,MAAMiF,sBAAsB,GAAG7L,CAAC,CAAE,IAAK,CAAC;YACxC,MAAM8M,YAAY,GAAGjB,sBAAsB,CAACU,IAAI,CAAE,cAAe,CAAC;YAClE,MAAMQ,cAAc,GAAGlB,sBAAsB,CAACU,IAAI,CAAE,gBAAiB,CAAC;YACtE,MAAMS,kBAAkB,GAAGzI,QAAQ,CAAEsH,sBAAsB,CAACU,IAAI,CAAE,UAAW,CAAE,CAAC;YAChF,MAAMU,uBAAuB,GAAGpB,sBAAsB,CAAChJ,IAAI,CAAE,uBAAwB,CAAC;YACtF,MAAMqK,6BAA6B,GAAGD,uBAAuB,CAAC5K,MAAM;YACpE,IAAI8K,iBAAiB,GAAG,CAAC;YAEzB,IAAKJ,cAAc,KAAK,UAAU,IAAI,CAAE7B,WAAW,EAAG;cACrD,IAAIkC,6BAA6B,GAAG,IAAI;cAExCpN,CAAC,CAACiH,IAAI,CAAEgG,uBAAuB,EAAE,UAAUrG,CAAC,EAAG;gBAC9C,MAAMqG,uBAAuB,GAAGjN,CAAC,CAAE,IAAK,CAAC;gBACzCmN,iBAAiB,GAAG5I,QAAQ,CAAE0I,uBAAuB,CAACrB,IAAI,CAAE,MAAO,CAAE,CAAC;gBAEtE,IAAK7E,UAAU,CAAEkG,uBAAuB,CAACzK,GAAG,CAAC,CAAE,CAAC,GAAG,CAAC,EAAG;kBACtD,IAAK+J,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,KAAKxI,SAAS,EAAG;oBACzDiI,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,GAAG,CAAC,CAAC;kBAC1C;kBACAP,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,CAAEK,iBAAiB,CAAE,GAAG,CAAC,CAAC;kBAC9DZ,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,CAAEK,iBAAiB,CAAE,CAACE,QAAQ,GAAGJ,uBAAuB,CAACzK,GAAG,CAAC,CAAC;kBAElG4K,6BAA6B,GAAG,KAAK;gBACtC;gBAEA,IAAKJ,kBAAkB,EAAG;kBACzB,IAAKI,6BAA6B,IAAIxG,CAAC,KAAKsG,6BAA6B,GAAG,CAAC,EAAG;oBAC/EhC,WAAW,GAAG,IAAI;oBAClBW,sBAAsB,CAACE,QAAQ,CAAE,QAAS,CAAC;oBAC3CuB,UAAU,CAAE,YAAW;sBACtBzB,sBAAsB,CAAC0B,WAAW,CAAE,QAAS,CAAC;oBAC/C,CAAC,EAAE,IAAK,CAAC;kBACV;gBACD;cACD,CAAE,CAAC;YACJ,CAAC,MAAM,IAAKR,cAAc,KAAK,QAAQ,IAAI,CAAE7B,WAAW,EAAG;cAC1D,MAAM+B,uBAAuB,GAAGpB,sBAAsB,CAAChJ,IAAI,CAAE,uBAAwB,CAAC;cACtFsK,iBAAiB,GAAG5I,QAAQ,CAAE0I,uBAAuB,CAACzK,GAAG,CAAC,CAAE,CAAC;cAE7D,IAAK2K,iBAAiB,GAAG,CAAC,EAAG;gBAC5B,IAAKZ,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,KAAKxI,SAAS,EAAG;kBACzDiI,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,GAAG,CAAC,CAAC;gBAC1C;gBACAP,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,CAAEK,iBAAiB,CAAE,GAAG,CAAC,CAAC;cAC/D,CAAC,MAAM,IAAKH,kBAAkB,EAAG;gBAChC9B,WAAW,GAAG,IAAI;gBAClB+B,uBAAuB,CAAClB,QAAQ,CAAE,QAAS,CAAC;gBAC5CuB,UAAU,CAAE,YAAW;kBACtBL,uBAAuB,CAACM,WAAW,CAAE,QAAS,CAAC;gBAChD,CAAC,EAAE,IAAK,CAAC;cACV;YACD,CAAC,MAAM,IAAKR,cAAc,KAAK,UAAU,IAAI,CAAE7B,WAAW,EAAG;cAC5D,IAAIsC,8BAA8B,GAAG,IAAI;cAEzCxN,CAAC,CAACiH,IAAI,CAAEgG,uBAAuB,EAAE,UAAUrG,CAAC,EAAG;gBAC9C,MAAMqG,uBAAuB,GAAGjN,CAAC,CAAE,IAAK,CAAC;gBACzC,IAAKiN,uBAAuB,CAAClD,EAAE,CAAE,UAAW,CAAC,EAAG;kBAC/C,IAAKwC,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,KAAKxI,SAAS,EAAG;oBACzDiI,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,GAAG,CAAC,CAAC;kBAC1C;kBACAK,iBAAiB,GAAG5I,QAAQ,CAAE0I,uBAAuB,CAACzK,GAAG,CAAC,CAAE,CAAC;kBAE7D+J,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,CAAEK,iBAAiB,CAAE,GAAG,CAAC,CAAC;kBAE9DK,8BAA8B,GAAG,KAAK;kBACtCtC,WAAW,GAAG,KAAK;gBACpB;gBAEA,IAAK8B,kBAAkB,EAAG;kBACzB,IAAKQ,8BAA8B,IAAI5G,CAAC,KAAKsG,6BAA6B,GAAG,CAAC,EAAG;oBAChFhC,WAAW,GAAG,IAAI;oBAClBW,sBAAsB,CAACE,QAAQ,CAAE,QAAS,CAAC;oBAC3CuB,UAAU,CAAE,YAAW;sBACtBzB,sBAAsB,CAAC0B,WAAW,CAAE,QAAS,CAAC;oBAC/C,CAAC,EAAE,IAAK,CAAC;kBACV;gBACD;cACD,CAAE,CAAC;YACJ,CAAC,MAAM,IAAKR,cAAc,KAAK,OAAO,IAAI,CAAE7B,WAAW,EAAG;cACzD,IAAIuC,2BAA2B,GAAG,IAAI;cAEtCzN,CAAC,CAACiH,IAAI,CAAEgG,uBAAuB,EAAE,UAAUrG,CAAC,EAAG;gBAC9C,MAAMqG,uBAAuB,GAAGjN,CAAC,CAAE,IAAK,CAAC;gBAEzC,IAAKiN,uBAAuB,CAAClD,EAAE,CAAE,UAAW,CAAC,EAAG;kBAC/C,IAAKwC,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,KAAKxI,SAAS,EAAG;oBACzDiI,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,GAAG,CAAC,CAAC;kBAC1C;kBACAK,iBAAiB,GAAG5I,QAAQ,CAAE0I,uBAAuB,CAACzK,GAAG,CAAC,CAAE,CAAC;kBAC7D+J,IAAI,CAACM,eAAe,CAAEC,YAAY,CAAE,CAAEK,iBAAiB,CAAE,GAAG,CAAC,CAAC;kBAE9DM,2BAA2B,GAAG,KAAK;kBACnCvC,WAAW,GAAG,KAAK;gBACpB;gBAEA,IAAK8B,kBAAkB,EAAG;kBACzB,IAAKS,2BAA2B,IAAI7G,CAAC,KAAKsG,6BAA6B,GAAG,CAAC,EAAG;oBAC7EhC,WAAW,GAAG,IAAI;oBAClBW,sBAAsB,CAACE,QAAQ,CAAE,QAAS,CAAC;oBAC3CuB,UAAU,CAAE,YAAW;sBACtBzB,sBAAsB,CAAC0B,WAAW,CAAE,QAAS,CAAC;oBAC/C,CAAC,EAAE,IAAK,CAAC;kBACV;gBACD;cACD,CAAE,CAAC;YACJ;UACD,CAAE,CAAC;;UAEH;;UAEAhB,IAAI,CAACM,eAAe,GAAG1K,IAAI,CAACuL,SAAS,CAAInB,IAAI,CAACM,eAAkB,CAAC;QAClE;;QAEA;QACA,IAAKrM,6BAA6B,CAAC6B,MAAM,GAAG,CAAC,EAAG;UAC/C,IAAKmB,qBAAqB,CAACnB,MAAM,GAAG,CAAC,IAAIoB,sBAAsB,CAACpB,MAAM,GAAG,CAAC,EAAG;YAC5E,IAAKmB,qBAAqB,CAAChB,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;cACzCgB,qBAAqB,CAACoI,IAAI,CAAE,aAAa,EAAExH,cAAc,CAACuJ,uBAAwB,CAAC;cACnFnK,qBAAqB,CAACuI,QAAQ,CAAE,OAAQ,CAAC;cACzC;YACD;YAEA,IAAKtI,sBAAsB,CAACjB,GAAG,CAAC,CAAC,KAAK,EAAE,EAAG;cAC1CiB,sBAAsB,CAACmI,IAAI,CAAE,aAAa,EAAExH,cAAc,CAACwJ,wBAAyB,CAAC;cACrFnK,sBAAsB,CAACsI,QAAQ,CAAE,OAAQ,CAAC;cAC1C;YACD;YAEAQ,IAAI,CAACrE,aAAa,GAAG1E,qBAAqB,CAAChB,GAAG,CAAC,CAAC;YAChD+J,IAAI,CAACpE,cAAc,GAAG1E,sBAAsB,CAACjB,GAAG,CAAC,CAAC;UACnD;QACD;;QAEA;QACA,IAAKf,eAAe,CAACY,MAAM,GAAG,CAAC,EAAG;UACjCrC,CAAC,CAACiH,IAAI,CAAExF,eAAe,EAAE,UAAUmF,CAAC,EAAG;YACtC,IAAK5G,CAAC,CAAE,IAAK,CAAC,CAAC+J,EAAE,CAAE,UAAW,CAAC,EAAG;cACjCwC,IAAI,CAACsB,uBAAuB,GAAG7N,CAAC,CAAE,IAAK,CAAC,CAACwC,GAAG,CAAC,CAAC;YAC/C;UACD,CAAE,CAAC;QACJ;;QAEA;QACA;QACA,MAAMsL,kBAAkB,GAAGvN,kBAAkB,CAACsC,IAAI,CAAE,4BAA6B,CAAC;QAElFiL,kBAAkB,CAAC7G,IAAI,CAAC,YAAW;UAClCsF,IAAI,CAACvM,CAAC,CAAE,IAAK,CAAC,CAAC4L,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG5L,CAAC,CAAE,IAAK,CAAC,CAACwC,GAAG,CAAC,CAAC;QAC/C,CAAC,CAAC;QAEF,IAAK,CAAE0I,WAAW,EAAG;UACpBlL,CAAC,CAAE,UAAW,CAAC,CAACyK,IAAI,CAAC,CAAC;UACtBQ,cAAc,CAACc,QAAQ,CAAE,SAAU,CAAC;UACpC/L,CAAC,CAAC+N,IAAI,CAAE;YACPC,GAAG,EAAEvC,gBAAgB,GAAG,gCAAgC;YACxDwC,IAAI,EAAE,MAAM;YACZ1B,IAAI;YACJ2B,QAAQ,EAAE,MAAM;YAChBC,OAAOA,CAAEC,MAAM,EAAG;cACjB,IAAKA,MAAM,CAACC,MAAM,KAAK,SAAS,EAAG;gBAClC,MAAMC,SAAS,GAAG;kBACjB7L,UAAU,EAAE0I,gBAAgB,CAAC3I,GAAG,CAAC,CAAC;kBAClCE,SAAS,EAAE0I,eAAe,CAAC5I,GAAG,CAAC,CAAC;kBAChCG,KAAK,EAAE0I,WAAW,CAAC7I,GAAG,CAAC,CAAC;kBACxBI,KAAK,EAAE0I,WAAW,CAAC9I,GAAG,CAAC;gBACxB,CAAC;gBAED+L,QAAQ,CAACC,MAAM,GAAG,YAAY,GAAGrM,IAAI,CAACuL,SAAS,CAAEY,SAAU,CAAC,GAAG,UAAU;gBACzEG,MAAM,CAACC,QAAQ,GAAG1O,CAAC,CAAE,0BAA2B,CAAC,CAACwC,GAAG,CAAC,CAAC;cACxD,CAAC,MAAM;gBACNmM,KAAK,CAAEP,MAAM,CAACQ,OAAQ,CAAC;cACxB;YACD,CAAC;YAAE9D,KAAKA,CAAEsD,MAAM,EAAG;cAClBvD,OAAO,CAACC,KAAK,CAAEsD,MAAO,CAAC;YACxB;UACD,CAAE,CAAC,CAACS,IAAI,CAAE,YAAW;YACpB7O,CAAC,CAAE,UAAW,CAAC,CAAC2K,IAAI,CAAC,CAAC;YACtBM,cAAc,CAACsC,WAAW,CAAE,SAAU,CAAC;UACxC,CAAE,CAAC;QACJ;MACD;IACD,CAAE,CAAC;EACJ,CAAC;EAEDvN,CAAC,CAACgC,EAAE,CAAC8M,YAAY,GAAG,YAAW;IAC9B9O,CAAC,CAAE,gBAAiB,CAAC,CAAC6C,IAAI,CAAE,UAAW,CAAC,CAAC8D,EAAE,CAAE,QAAQ,EAAE,YAAW;MACjE3G,CAAC,CAAE,gBAAiB,CAAC,CAAC+O,MAAM,CAAC,CAAC;IAC/B,CAAE,CAAC;EACJ,CAAC;EAED/O,CAAC,CAACgC,EAAE,CAACgN,gBAAgB,GAAG,YAAW;IAClC1O,WAAW,GAAG,KAAK;IACnB,MAAM2O,KAAK,GAAGjP,CAAC,CAAE,0BAA2B,CAAC,CAACwC,GAAG,CAAC,CAAC;IACnD,MAAMiJ,gBAAgB,GAAGzL,CAAC,CAAE,sBAAuB,CAAC,CAACwC,GAAG,CAAC,CAAC;IAE1DxC,CAAC,CAAC+N,IAAI,CAAE;MACPC,GAAG,EAAEvC,gBAAgB,GAAG,2BAA2B;MACnDwC,IAAI,EAAE,MAAM;MACZ1B,IAAI,EAAE,QAAQ,GAAG0C,KAAK;MACtBf,QAAQ,EAAE,MAAM;MAChBC,OAAOA,CAAEC,MAAM,EAAG;QACjB,IAAKA,MAAM,CAACC,MAAM,IAAI,SAAS,EAAG;UACjCrO,CAAC,CAAE,kBAAmB,CAAC,CAACkP,IAAI,CAAEd,MAAM,CAACc,IAAK,CAAC;UAC3C5O,WAAW,GAAG,IAAI;QACnB;MACD;IACD,CAAE,CAAC;EACJ,CAAC;EAEDN,CAAC,CAACgC,EAAE,CAACmN,6BAA6B,GAAG,YAAW;IAC/C,MAAMC,gBAAgB,GAAGpP,CAAC,CAAE,8BAA+B,CAAC;IAC5D,IAAKoP,gBAAgB,CAAC/M,MAAM,EAAG;MAC9B/B,WAAW,GAAG,IAAI;MAClB,IAAI+O,OAAO,GAAGrP,CAAC,CAAE,4BAA6B,CAAC,CAACwC,GAAG,CAAC,CAAC;MACrD,IAAK6M,OAAO,IAAI,EAAE,EAAG;QACpBA,OAAO,GAAG,KAAK;MAChB;MAEAC,WAAW,CAAE,YAAW;QACvB,IAAKhP,WAAW,EAAG;UAClBN,CAAC,CAACgC,EAAE,CAACgN,gBAAgB,CAAC,CAAC;QACxB;MACD,CAAC,EAAEK,OAAQ,CAAC;IACb;EACD,CAAC;EAEDrP,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,GAAG,UAAU6J,WAAW,EAAG;IAC9D,IAAIC,YAAY,GAAG,EAAE;IACrB,IAAIrK,IAAI,GAAG,EAAE;IACb,IAAIsK,KAAK,GAAG,EAAE;IACd,IAAIC,IAAI,GAAG,EAAE;IACb,MAAMC,cAAc,GAAG,GAAG;IAE1B,IAAK3P,CAAC,CAACoD,iBAAiB,KAAK,UAAU,EAAG;MACzC,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzCoC,IAAI,GAAGyK,QAAQ,CAAE,CAAC,CAAE;MACpBH,KAAK,GAAGG,QAAQ,CAAE,CAAC,CAAE;MACrBF,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB,CAAC,MAAM,IAAK5P,CAAC,CAACoD,iBAAiB,KAAK,UAAU,EAAG;MAChD,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzCoC,IAAI,GAAGyK,QAAQ,CAAE,CAAC,CAAE;MACpBH,KAAK,GAAGG,QAAQ,CAAE,CAAC,CAAE;MACrBF,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB,CAAC,MAAM,IAAK5P,CAAC,CAACoD,iBAAiB,KAAK,UAAU,EAAG;MAChD,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzCoC,IAAI,GAAGyK,QAAQ,CAAE,CAAC,CAAE;MACpBH,KAAK,GAAGG,QAAQ,CAAE,CAAC,CAAE;MACrBF,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB,CAAC,MAAM,IAAK5P,CAAC,CAACoD,iBAAiB,KAAK,UAAU,EAAG;MAChD,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzCoC,IAAI,GAAGyK,QAAQ,CAAE,CAAC,CAAE;MACpBH,KAAK,GAAGG,QAAQ,CAAE,CAAC,CAAE;MACrBF,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB,CAAC,MAAM,IAAK5P,CAAC,CAACoD,iBAAiB,KAAK,UAAU,EAAG;MAChD,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzCoC,IAAI,GAAGyK,QAAQ,CAAE,CAAC,CAAE;MACpBH,KAAK,GAAGG,QAAQ,CAAE,CAAC,CAAE;MACrBF,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB,CAAC,MAAM,IAAK5P,CAAC,CAACoD,iBAAiB,KAAK,UAAU,EAAG;MAChD,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzCoC,IAAI,GAAGyK,QAAQ,CAAE,CAAC,CAAE;MACpBH,KAAK,GAAGG,QAAQ,CAAE,CAAC,CAAE;MACrBF,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB,CAAC,MAAM,IAAK5P,CAAC,CAACoD,iBAAiB,KAAK,cAAc,EAAG;MACpD,MAAMwM,QAAQ,GAAGL,WAAW,CAACxM,KAAK,CAAE,GAAI,CAAC;MACzC,MAAM8M,cAAc,GAAGD,QAAQ,CAAE,CAAC,CAAE,CAACE,IAAI,CAAC,CAAC,CAAC/M,KAAK,CAAE,GAAI,CAAC;MACxDoC,IAAI,GAAG0K,cAAc,CAAE,CAAC,CAAE;MAC1BJ,KAAK,GAAGtP,UAAU,CAACuE,OAAO,CAAEmL,cAAc,CAAE,CAAC,CAAG,CAAC,GAAG,CAAC;MAErD,IAAKtL,QAAQ,CAAEkL,KAAM,CAAC,GAAG,EAAE,EAAG;QAC7BA,KAAK,GAAG,GAAG,GAAGA,KAAK;MACpB;MAEAC,IAAI,GAAGE,QAAQ,CAAE,CAAC,CAAE;IACrB;IAEAJ,YAAY,IAAIE,IAAI,GAAGC,cAAc,GAAGF,KAAK,GAAGE,cAAc,GAAGxK,IAAI;;IAErE;;IAEA,OAAOqK,YAAY;EACpB,CAAC;EAEDxP,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,GAAG,UAAUsL,QAAQ,EAAG;IAC/D,IAAIP,YAAY,GAAG,EAAE;IACrB,MAAME,IAAI,GAAGK,QAAQ,CAAC9K,WAAW,CAAC,CAAC;IACnC,MAAMwK,KAAK,GAAG,CAAE,GAAG,IAAKM,QAAQ,CAACC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAE,EAAGC,KAAK,CAAE,CAAC,CAAE,CAAC;IAC/D,MAAM9K,IAAI,GAAG,CAAE,GAAG,GAAG4K,QAAQ,CAACnL,OAAO,CAAC,CAAC,EAAGqL,KAAK,CAAE,CAAC,CAAE,CAAC;IAErDT,YAAY,IAAIE,IAAI,GAAG,GAAG,GAAGD,KAAK,GAAG,GAAG,GAAGtK,IAAI;IAE/C,OAAOqK,YAAY;EACpB,CAAC;EAEDxP,CAAC,CAACgC,EAAE,CAACkO,qBAAqB,GAAG,UAAUtK,UAAU,EAAEE,QAAQ,EAAG;IAC7D,MAAMqK,cAAc,GAAG,IAAItM,IAAI,CAAE+B,UAAW,CAAC;IAC7C,MAAMC,YAAY,GAAG,IAAIhC,IAAI,CAAEiC,QAAS,CAAC;IACzC,MAAMH,SAAS,GAAGwK,cAAc;IAChC,IAAIC,SAAS,GAAG,CAAC;IAEjB,OAAQzK,SAAS,IAAIE,YAAY,EAAG;MACnCF,SAAS,CAAChB,OAAO,CAAEgB,SAAS,CAACf,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;MAC5CwL,SAAS,IAAI,CAAC;IACf;IAEA,OAAOA,SAAS;EACjB,CAAC;;EAED;AACD;AACA;AACA;AACA;AACA;AACA;AACA;EACCpQ,CAAC,CAACgC,EAAE,CAACuG,sBAAsB,GAAG,UAAU4H,cAAc,EAAEtK,YAAY,EAAG;IACtE,MAAMF,SAAS,GAAG,IAAI9B,IAAI,CAAEsM,cAAc,CAACE,OAAO,CAAC,CAAE,CAAC;IACtD,IAAID,SAAS,GAAG,CAAC;IAEjB,OAAQzK,SAAS,GAAGE,YAAY,EAAG;MAClCF,SAAS,CAAChB,OAAO,CAAEgB,SAAS,CAACf,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;MAC5CwL,SAAS,IAAI,CAAC;IACf;IAEA,OAAOA,SAAS;EACjB,CAAC;EAEDpQ,CAAC,CAACgC,EAAE,CAACkE,wBAAwB,GAAG,YAAW;IAC1C,MAAMoK,kBAAkB,GAAG9M,qBAAqB,CAAChB,GAAG,CAAC,CAAC;IACtD,MAAM+N,mBAAmB,GAAG9M,sBAAsB,CAACjB,GAAG,CAAC,CAAC;IAExD,IAAK8N,kBAAkB,IAAI,EAAE,IAAIC,mBAAmB,IAAI,EAAE,EAAG;MAC5DvQ,CAAC,CAACwF,kBAAkB,GAAG,EAAE;MACzB,MAAMI,UAAU,GAAG,IAAI/B,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAElC,qBAAqB,CAAChB,GAAG,CAAC,CAAE,CAAE,CAAC;MAClG,MAAMsD,QAAQ,GAAG,IAAIjC,IAAI,CAAE7D,CAAC,CAACgC,EAAE,CAAC0D,+BAA+B,CAAEjC,sBAAsB,CAACjB,GAAG,CAAC,CAAE,CAAE,CAAC;MACjG,MAAMmD,SAAS,GAAGC,UAAU;MAE5BE,QAAQ,CAACnB,OAAO,CAAEmB,QAAQ,CAAClB,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;MAE1C,OAAQe,SAAS,GAAGG,QAAQ,EAAG;QAC9B;QACA,MAAMC,6BAA6B,GAAG/F,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEkB,SAAU,CAAC;QAC3F3F,CAAC,CAACwF,kBAAkB,CAACQ,IAAI,CAAED,6BAA8B,CAAC;QAC1DJ,SAAS,CAAChB,OAAO,CAAEgB,SAAS,CAACf,OAAO,CAAC,CAAC,GAAG,CAAE,CAAC;MAC7C;MAEA,MAAM4L,gCAAgC,GAAG,SAAAA,CAAUrL,IAAI,EAAG;QACzDA,IAAI,GAAGnF,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEU,IAAK,CAAC;QACvD;QACA,MAAMT,OAAO,GAAG1E,CAAC,CAACwF,kBAAkB,CAACd,OAAO,CAAES,IAAK,CAAC;;QAEpD;QACA,IAAKnF,CAAC,CAACgD,cAAc,KAAK,IAAI,EAAG;UAChC,MAAMiD,mBAAmB,GAAGjG,CAAC,CAACgD,cAAc,CAAC0B,OAAO,CAAES,IAAK,CAAC;UAE5D,IAAKT,OAAO,GAAG,CAAC,CAAC,EAAG;YACnB,IAAKuB,mBAAmB,GAAG,CAAC,CAAC,EAAG;cAC/B,IAAKd,IAAI,IAAIS,UAAU,EAAG;gBACzB,OAAO,CAAE,KAAK,EAAE,wBAAwB,EAAE,EAAE,CAAE;cAC/C,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;gBAC9B,OAAO,CAAE,KAAK,EAAE,sBAAsB,EAAE,EAAE,CAAE;cAC7C;cACA,OAAO,CAAE,KAAK,EAAE,aAAa,EAAE,EAAE,CAAE;YACpC;YACA,IAAKX,IAAI,IAAIS,UAAU,EAAG;cACzB,OAAO,CAAE,IAAI,EAAE,wBAAwB,EAAE,WAAW,CAAE;YACvD,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;cAC9B,OAAO,CAAE,IAAI,EAAE,sBAAsB,EAAE,WAAW,CAAE;YACrD;YACA,OAAO,CAAE,IAAI,EAAE,aAAa,EAAE,WAAW,CAAE;UAC5C;UACA,IAAKG,mBAAmB,GAAG,CAAC,CAAC,EAAG;YAC/B,OAAO,CAAE,KAAK,EAAE,EAAE,EAAE,EAAE,CAAE;UACzB;UACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,WAAW,CAAE;QACjC;QACA,IAAKvB,OAAO,GAAG,CAAC,CAAC,EAAG;UACnB,IAAKS,IAAI,IAAIS,UAAU,EAAG;YACzB,OAAO,CAAE,IAAI,EAAE,wBAAwB,EAAE,EAAE,CAAE;UAC9C,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;YAC9B,OAAO,CAAE,IAAI,EAAE,sBAAsB,EAAE,EAAE,CAAE;UAC5C;UACA,OAAO,CAAE,IAAI,EAAE,aAAa,EAAE,EAAE,CAAE;QACnC;QACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAE;MACxB,CAAC;MAED,MAAM2K,kCAAkC,GAAG,SAAAA,CAAUtL,IAAI,EAAG;QAC3DA,IAAI,GAAGnF,CAAC,CAACgC,EAAE,CAACyC,mCAAmC,CAAEU,IAAK,CAAC;QACvD;QACA,MAAMT,OAAO,GAAG1E,CAAC,CAACwF,kBAAkB,CAACd,OAAO,CAAES,IAAK,CAAC;;QAEpD;;QAEA,IAAKT,OAAO,GAAG,CAAC,CAAC,EAAG;UACnB,IAAKS,IAAI,IAAIS,UAAU,EAAG;YACzB,OAAO,CAAE,IAAI,EAAE,wBAAwB,EAAE,EAAE,CAAE;UAC9C,CAAC,MAAM,IAAKT,IAAI,IAAIW,QAAQ,EAAG;YAC9B,OAAO,CAAE,IAAI,EAAE,sBAAsB,EAAE,EAAE,CAAE;UAC5C;UACA,OAAO,CAAE,IAAI,EAAE,aAAa,EAAE,EAAE,CAAE;QACnC;QACA,OAAO,CAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAE;MACxB,CAAC;MAED,IAAKV,MAAM,CAAC,CAAC,CAACC,UAAU,EAAG;QAC1B7B,qBAAqB,CAAC6B,UAAU,CAAE,QAAQ,EAAE,eAAe,EAAEmL,gCAAiC,CAAC;QAE/F/M,sBAAsB,CAAC4B,UAAU,CAAE,QAAQ,EAAE,eAAe,EAAEoL,kCAAmC,CAAC;MACnG;IACD;;IAEA;EACD,CAAC;EAEDzQ,CAAC,CAACgC,EAAE,CAAC0O,wBAAwB,GAAG,YAAW;IAC1C,MAAMC,mBAAmB,GAAGpC,QAAQ,CAACqC,cAAc,CAAE,kBAAmB,CAAC;IAEzE,IAAKD,mBAAmB,EAAG;MAC1B,MAAME,sBAAsB,GAAG7Q,CAAC,CAAE,iBAAkB,CAAC;MACrD,MAAM8Q,sBAAsB,GAAG9Q,CAAC,CAAE,iBAAkB,CAAC;MACrD,MAAM+Q,uBAAuB,GAAGhK,UAAU,CAAE/G,CAAC,CAAE,qCAAsC,CAAC,CAACwC,GAAG,CAAC,CAAE,CAAC;MAC9F,MAAMwO,qBAAqB,GAAGjK,UAAU,CAAE/G,CAAC,CAAE,mCAAoC,CAAC,CAACwC,GAAG,CAAC,CAAE,CAAC;MAC1F,MAAMyO,iBAAiB,GAAGjR,CAAC,CAAE,4BAA6B,CAAC;MAC3D,MAAMkR,iBAAiB,GAAGlR,CAAC,CAAE,4BAA6B,CAAC;MAC3D,MAAMmR,SAAS,GAAGpK,UAAU,CAAEmK,iBAAiB,CAAC1O,GAAG,CAAC,CAAE,CAAC;MACvD,MAAM4O,SAAS,GAAGrK,UAAU,CAAEkK,iBAAiB,CAACzO,GAAG,CAAC,CAAE,CAAC;;MAEvD;MACA,IAAK2O,SAAS,GAAGC,SAAS,EAAG;QAC5B,IAAK,CAAET,mBAAmB,CAACU,UAAU,EAAG;UACvC5C,MAAM,CAAC4C,UAAU,CAACC,MAAM,CAACX,mBAAmB,EAAE;YAC7ClK,KAAK,EAAE,CAAC0K,SAAS,EAAEC,SAAS,CAAC;YAC7BG,OAAO,EAAE,IAAI;YACbC,KAAK,EAAE;cACNC,GAAG,EAAEV,uBAAuB;cAC5BW,GAAG,EAAEV;YACN;UACD,CAAC,CAAC;QACH;QAEAL,mBAAmB,CAACU,UAAU,CAAC1K,EAAE,CAAE,QAAQ,EAAE,UAAUgL,MAAM,EAAG;UAC/D;UACA,MAAMR,SAAS,GAAGQ,MAAM,CAAE,CAAC,CAAE;UAC7B,MAAMP,SAAS,GAAGO,MAAM,CAAE,CAAC,CAAE;UAE7BT,iBAAiB,CAAC1O,GAAG,CAAE2O,SAAU,CAAC;UAClCF,iBAAiB,CAACzO,GAAG,CAAE4O,SAAU,CAAC;UAClCP,sBAAsB,CAACpI,IAAI,CAAE0I,SAAU,CAAC;UACxCL,sBAAsB,CAACrI,IAAI,CAAE2I,SAAU,CAAC;QACzC,CAAE,CAAC;MACJ;IACD;EACD,CAAC;EACDpR,CAAC,CAACgC,EAAE,CAACwH,iBAAiB,GAAG,UAAUhH,GAAG,EAAE;IACvCA,GAAG,GAAGA,GAAG,CAACoI,OAAO,CAAC7I,YAAY,CAAC;IAC/B,MAAM6P,KAAK,GAAGpP,GAAG,CAACO,KAAK,CAAC,GAAG,CAAC;IAC5B,IAAIqB,cAAc,CAACyN,kBAAkB,EAAE;MACtCD,KAAK,CAAC,CAAC,CAAC,GAAGA,KAAK,CAAC,CAAC,CAAC,CAACE,OAAO,CAAC,uBAAuB,EAAE1N,cAAc,CAACyN,kBAAkB,CAAC;IACxF;IACA,OAAOD,KAAK,CAACG,IAAI,CAAC3N,cAAc,CAAC4N,iBAAiB,IAAI,GAAG,CAAC;EAC3D,CAAC;EAED,SAAS9P,SAASA,CAAE+P,KAAK,EAAG;IAC3B,MAAMC,IAAI,GAAGD,KAAK,GAAG,GAAG;IACxB,MAAME,aAAa,GAAGC,kBAAkB,CAAE7D,QAAQ,CAACC,MAAO,CAAC;IAC3D,MAAM6D,EAAE,GAAGF,aAAa,CAACpP,KAAK,CAAE,GAAI,CAAC;IACrC,KAAM,IAAI6D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyL,EAAE,CAAChQ,MAAM,EAAEuE,CAAC,EAAE,EAAG;MACrC,IAAI0L,CAAC,GAAGD,EAAE,CAAEzL,CAAC,CAAE;MACf,OAAQ0L,CAAC,CAACC,MAAM,CAAE,CAAE,CAAC,IAAI,GAAG,EAAG;QAC9BD,CAAC,GAAGA,CAAC,CAACE,SAAS,CAAE,CAAE,CAAC;MACrB;MACA,IAAKF,CAAC,CAAC5N,OAAO,CAAEwN,IAAK,CAAC,IAAI,CAAC,EAAG;QAC7B,OAAOI,CAAC,CAACE,SAAS,CAAEN,IAAI,CAAC7P,MAAM,EAAEiQ,CAAC,CAACjQ,MAAO,CAAC;MAC5C;IACD;IACA,OAAO,EAAE;EACV;AACD,CAAC,EAAE+C,MAAM,EAAE,mBAAoB,CAAC;AAEhCA,MAAM,CAAE,UAAUpF,CAAC,EAAG;EACrB,YAAY;;EACZA,CAAC,CAACgC,EAAE,CAACC,iBAAiB,CAAC,CAAC;EACxBjC,CAAC,CAACgC,EAAE,CAAC+I,mBAAmB,CAAC,CAAC;EAC1B;EACA/K,CAAC,CAACgC,EAAE,CAACmN,6BAA6B,CAAC,CAAC;EACpCnP,CAAC,CAACgC,EAAE,CAAC0O,wBAAwB,CAAC,CAAC;EAC/B1Q,CAAC,CAACuO,QAAQ,CAAC,CAACkE,KAAK,CAAC,YAAW;IACtBzS,CAAC,CAACgC,EAAE,CAACmC,uBAAuB,CAAC,CAAC;EAClC,CAAC,CAAC;EAEL,IAAKnE,CAAC,CAAE,cAAe,CAAC,CAACqC,MAAM,EAAG;IACjCrC,CAAC,CAAE,cAAe,CAAC,CAAC0S,SAAS,CAAE;MAC9BC,KAAK,EAAE;IACR,CAAE,CAAC;EACJ;AACD,CAAE,CAAC,C","sources":["webpack://travel-booking/./assets/js/frontend/booking.js"],"sourcesContent":["/**\n * Booking tour js\n *\n * @author physcode\n * @version 2.0.8\n */\n\n( function( $ ) {\n\n\t'use strict';\n\tconst date_validate = [];\n\tconst date_can_book = [];\n\tlet tour_month = [];\n\tconst tour_days = '';\n\tconst date_book = '';\n\tlet load_notify = false;\n\n\tlet el_tourBookingForm = null;\n\tlet el_tour_date_checkin_checkout = null;\n\tlet el_tour_datepicker_range_checkin_checkout = null;\n\tlet el_input_tour_datepicker_range_checkin_checkout = null;\n\tlet el_number_ticket = null;\n\tlet el_price_ticket = null;\n\tlet el_show_price_ticket = null;\n\tlet el_number_children = null;\n\tlet el_price_children = null;\n\tlet el_show_price_children = null;\n\tlet el_field_travel_booking = null;\n\tlet el_input_date_book = null;\n\tlet tour_have_children_ticket = false;\n\tlet el_tour_date_starts_after = null;\n\tlet el_tour_duration_number = null;\n\tlet el_tour_group_discount_data_phys;\n\tlet tour_group_discount_data;\n\tlet el_label_tour_group_discount = null;\n\tlet el_tour_deposit = null;\n\tlet el_tour_variations_options;\n\tlet tour_variation_options;\n\tlet info_user;\n\tlet el_show_total_price;\n\tconst price_dates_tour = {};\n\tlet num_decimals = 0;\n\n\t$.fn.tour_booking_init = function() {\n\t\tel_tourBookingForm = $( 'form#tourBookingForm' );\n\n\t\tif ( getCookie( 'info_user' ) ) {\n\t\t\tinfo_user = JSON.parse( getCookie( 'info_user' ) );\n\t\t}\n\n\t\tif ( el_tourBookingForm.length > 0 ) {\n\t\t\t$.fn._get_elms_tour_booking_form();\n\t\t\t$.fn.tour_booking();\n\n\t\t\tif ( info_user ) {\n\t\t\t\t$( 'input[name=first_name]' ).val( info_user.first_name );\n\t\t\t\t$( 'input[name=last_name]' ).val( info_user.last_name );\n\t\t\t\t$( 'input[name=email_tour]' ).val( info_user.email );\n\t\t\t\t$( 'input[name=phone]' ).val( info_user.phone );\n\t\t\t}\n\t\t}\n\n\t\tif ( info_user ) {\n\t\t\t// for billing\n\t\t\t$( 'input[name=billing_first_name]' ).val( info_user.first_name );\n\t\t\t$( 'input[name=billing_last_name]' ).val( info_user.last_name );\n\t\t\t$( 'input[name=billing_email]' ).val( info_user.email );\n\t\t\t$( 'input[name=billing_phone]' ).val( info_user.phone );\n\t\t}\n\t};\n\n\t$.fn._get_elms_tour_booking_form = function() {\n\t\tel_price_ticket = el_tourBookingForm.find( 'input[name=price_ticket]' );\n\t\tel_number_ticket = el_tourBookingForm.find( 'input[name=number_ticket]' );\n\t\tel_show_price_ticket = el_tourBookingForm.find( '.price_ticket' );\n\t\tel_number_children = el_tourBookingForm.find( 'input[name=number_children]' );\n\t\tel_price_children = el_tourBookingForm.find( 'input[name=price_children]' );\n\t\tel_field_travel_booking = el_tourBookingForm.find( '.field-travel-booking' );\n\t\tel_show_price_children = el_tourBookingForm.find( '.price_child' );\n\t\tel_tour_date_checkin_checkout = el_tourBookingForm.find( '.tour_date_checkin_checkout' );\n\t\tel_input_date_book = el_tourBookingForm.find( 'input[name=date_book]' );\n\t\tel_tour_date_starts_after = el_tourBookingForm.find( 'input[name=tour_date_starts_after]' );\n\t\tel_tour_duration_number = el_tourBookingForm.find( 'input[name=tour_duration_number]' );\n\t\tel_tour_group_discount_data_phys = el_tourBookingForm.find( 'input[name=tour_group_discount_data_phys]' );\n\t\tel_label_tour_group_discount = el_tourBookingForm.find( '.label-tour-group-discount' );\n\t\tel_tour_deposit = el_tourBookingForm.find( 'input[name=webtomizer_tour_deposit]' );\n\t\tel_tour_variations_options = el_tourBookingForm.find( 'input[name=_tour_variations_options]' );\n\t\tconst el_tour_month = el_tourBookingForm.find( 'input[name=tour_month]' );\n\t\tel_show_total_price = el_tourBookingForm.find( '.tour-subtotal' );\n\t\tnum_decimals = $( 'input[name=woocommerce_price_num_decimals]' ).val();\n\n\t\tif ( el_number_children.length > 0 ) {\n\t\t\ttour_have_children_ticket = true;\n\t\t}\n\n\t\tif ( el_tour_month.length ) {\n\t\t\ttour_month = el_tour_month.val().split( ',' );\n\t\t}\n\t};\n\n\t$._dates_disable = null;\n\t$._max_year = null;\n\t$._date_format_default = 'yy/mm/dd';\n\t$._date_format_default_datepicker_range = 'YYYY/MM/DD';\n\t$._tour_date_format = null;\n\t// $._date_format_convert_php_js = {};\n\t// $._date_format_convert_php_js['d/m/Y'] = 'dd/mm/yy';\n\t// $._date_format_convert_php_js['Y/m/d'] = 'yy/mm/dd';\n\t// $._date_format_convert_php_js['D, d M, Y'] = 'D, d M, yy';\n\t// $._date_format_convert_php_js['l, d F, Y'] = 'DD, d MM, yy';\n\t$._date_format_convert_php_js = {\n\t\t'Y/m/d': 'yy/mm/dd',\n\t\t'Y-m-d': 'yy-mm-dd',\n\t\t'd/m/Y': 'dd/mm/yy',\n\t\t'd-m-Y': 'dd-mm-yy',\n\t\t'm/d/Y': 'mm/dd/yy',\n\t\t'm-d-Y': 'mm-dd-yy',\n\t\t'D, d M, Y': 'D, d M, yy',\n\t\t'l, d F, Y': 'DD, d MM, yy',\n\t};\n\t$._tour_date_check_in_old = '';\n\tlet phys_tour_price_dates_type = null;\n\tlet el_tour_date_check_in = null;\n\tlet el_tour_date_check_out = null;\n\t$._tour_price_of_dates_option = null;\n\n\t$.fn.tour_booking = function() {\n\t\tlet tour_date_starts_after = 0;\n\t\tconst date_now = new Date();\n\t\tconst date_min_can_book = new Date();\n\t\tconst el_phys_tour_dates_disable = el_tourBookingForm.find( 'input[name=phys_tour_dates_disable]' );\n\t\tconst el_phys_tour_max_year_enable = el_tourBookingForm.find( 'input[name=phys_tour_max_year_enable]' );\n\t\t// let el_tour_date_format = el_tourBookingForm.find('input[name=tour_date_format]');\n\t\tphys_tour_price_dates_type = el_tourBookingForm.find( 'input[name=phys_tour_price_dates_type]' ).val();\n\t\tconst el_phys_tour_price_of_dates_option = el_tourBookingForm.find( 'input[name=phys_tour_price_of_dates_option]' );\n\n\t\tif ( el_tour_variations_options.length > 0 ) {\n\t\t\ttry {\n\t\t\t\ttour_variation_options = JSON.parse( el_tour_variations_options.val() );\n\t\t\t\t//el_tour_variations_options.val( '' );\n\n\t\t\t\t//console.log( tour_variation_options );\n\t\t\t} catch ( e ) {\n\t\t\t\ttour_variation_options = null;\n\t\t\t}\n\t\t}\n\n\t\tif ( el_tour_group_discount_data_phys.length ) {\n\t\t\ttry {\n\t\t\t\ttour_group_discount_data = JSON.parse( el_tour_group_discount_data_phys.val() );\n\t\t\t\t//el_tour_group_discount_data_phys.val( '' );\n\t\t\t} catch ( e ) {\n\t\t\t\ttour_group_discount_data = null;\n\t\t\t}\n\t\t}\n\n\t\t/*** Get subtotal price ***/\n\t\t$.fn.update_tour_total_price();\n\n\t\tif ( el_phys_tour_price_of_dates_option.length > 0 && el_phys_tour_price_of_dates_option.val() !== '' && el_phys_tour_price_of_dates_option.val() !== '{}' ) {\n\t\t\ttry {\n\t\t\t\t$._tour_price_of_dates_option = JSON.parse( el_phys_tour_price_of_dates_option.val() );\n\t\t\t\t//el_phys_tour_price_of_dates_option.val( '' );\n\t\t\t} catch ( e ) {\n\t\t\t\t$._tour_price_of_dates_option = null;\n\t\t\t}\n\t\t}\n\n\t\t/*** Set date format ***/\n\t\t$._tour_date_format = $._date_format_default;\n\n\t\tif ( $._date_format_convert_php_js[ travel_booking.tour_date_format ] !== undefined ) {\n\t\t\t$._tour_date_format = $._date_format_convert_php_js[ travel_booking.tour_date_format ];\n\t\t}\n\n\t\t$._max_year = el_phys_tour_max_year_enable.val();\n\n\t\tif ( el_phys_tour_dates_disable.length > 0 && el_phys_tour_dates_disable.val() !== '' ) {\n\t\t\t$._dates_disable = JSON.parse( el_phys_tour_dates_disable.val() );\n\t\t}\n\n\t\t/*** Start After ***/\n\t\tif ( el_tour_date_starts_after.length > 0 ) {\n\t\t\tif ( el_tour_date_starts_after.val() != '' && parseInt( el_tour_date_starts_after.val() ) !== 0 ) {\n\t\t\t\ttour_date_starts_after = parseInt( el_tour_date_starts_after.val() );\n\t\t\t}\n\t\t}\n\n\t\tif ( $._dates_disable !== null ) {\n\t\t\tlet dateMinCanBookStr = $.fn._convert_date_obj_by_format_default( date_min_can_book );\n\n\t\t\twhile ( $._dates_disable.indexOf( dateMinCanBookStr ) > -1 ) {\n\t\t\t\tdate_min_can_book.setDate( date_min_can_book.getDate() + 1 );\n\t\t\t\tdateMinCanBookStr = $.fn._convert_date_obj_by_format_default( date_min_can_book );\n\t\t\t}\n\n\t\t\tdate_min_can_book.setDate( date_min_can_book.getDate() + tour_date_starts_after );\n\n\t\t\t// console.log(date_min_can_book);\n\t\t} else {\n\t\t\tdate_min_can_book.setDate( date_now.getDate() + tour_date_starts_after );\n\t\t}\n\n\t\tconst option_date_picker = {\n\t\t\tdateFormat: $._tour_date_format,\n\t\t\tminDate: date_min_can_book,\n\t\t\tyearRange: date_min_can_book.getFullYear() + ':' + $._max_year,\n\t\t};\n\n\t\tif ( $._dates_disable !== null ) {\n\t\t\toption_date_picker.beforeShowDay = function( date ) {\n\t\t\t\tdate = $.fn._convert_date_obj_by_format_default( date );\n\n\t\t\t\tconst indexOf = $._dates_disable.indexOf( date );\n\n\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\treturn [ false, '', '' ];\n\t\t\t\t}\n\t\t\t\treturn [ true, '', 'Available' ];\n\t\t\t};\n\t\t}\n\n\t\t// Date book\n\t\tif ( el_input_date_book.length > 0 ) {\n\t\t\tdelete el_input_date_book.beforeShowDay;\n\t\t\tif ( jQuery().datepicker ) {\n\t\t\t\tel_input_date_book.datepicker( option_date_picker );\n\t\t\t\tel_input_date_book.datepicker( 'setDate', date_min_can_book );\n\t\t\t\tconst duration = parseInt( el_tour_duration_number.val() );\n\n\t\t\t\tconst function_anonymous_beforeShowDays = function( date ) {\n\t\t\t\t\t$._tour_dates_choose = [];\n\n\t\t\t\t\tif ( el_input_date_book.val() !== '' ) {\n\t\t\t\t\t\tconst date_start_obj = new Date( $.fn._convert_date_to_format_default( el_input_date_book.val() ) );\n\t\t\t\t\t\tconst date_next = date_start_obj;\n\t\t\t\t\t\tconst start_date = $.fn._convert_date_obj_by_format_default( date_start_obj );\n\t\t\t\t\t\tconst end_date_obj = new Date( $.fn._convert_date_to_format_default( el_input_date_book.val() ) );\n\t\t\t\t\t\tend_date_obj.setDate( date_start_obj.getDate() + duration );\n\t\t\t\t\t\tconst end_date = $.fn._convert_date_obj_by_format_default( end_date_obj );\n\n\t\t\t\t\t\twhile ( date_next < end_date_obj ) {\n\t\t\t\t\t\t\t// console.log(date_next);\n\t\t\t\t\t\t\tconst date_string_by_format_default = $.fn._convert_date_obj_by_format_default( date_next );\n\t\t\t\t\t\t\t$._tour_dates_choose.push( date_string_by_format_default );\n\t\t\t\t\t\t\tdate_next.setDate( date_next.getDate() + 1 );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdate = $.fn._convert_date_obj_by_format_default( date );\n\t\t\t\t\t\tconst indexOf = $._tour_dates_choose.indexOf( date );\n\n\t\t\t\t\t\tif ( $._dates_disable !== null ) {\n\t\t\t\t\t\t\tconst indexOfDatesDisable = $._dates_disable.indexOf( date );\n\n\t\t\t\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\t\t\t\tif ( indexOfDatesDisable > -1 ) {\n\t\t\t\t\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\t\t\t\t\treturn [ false, 'date-picked start-date', '' ];\n\t\t\t\t\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\t\t\t\t\treturn [ false, 'date-picked end-date', '' ];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn [ false, 'date-picked', '' ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\t\t\t\treturn [ true, 'date-picked start-date', 'Available' ];\n\t\t\t\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\t\t\t\treturn [ true, 'date-picked end-date', 'Available' ];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn [ true, 'date-picked', 'Available' ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif ( indexOfDatesDisable > -1 ) {\n\t\t\t\t\t\t\t\treturn [ false, '', '' ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn [ true, '', 'Available' ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\t\t\treturn [ true, 'date-picked start-date', '' ];\n\t\t\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\t\t\treturn [ true, 'date-picked end-date', '' ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn [ true, 'date-picked', '' ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ true, '', '' ];\n\t\t\t\t\t}\n\t\t\t\t\tdate = $.fn._convert_date_obj_by_format_default( date );\n\t\t\t\t\tif ( $._dates_disable !== null ) {\n\t\t\t\t\t\tconst indexOf = $._dates_disable.indexOf( date );\n\n\t\t\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\t\t\treturn [ false, '', '' ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ true, '', 'Available' ];\n\t\t\t\t\t}\n\t\t\t\t\treturn [ true, '', 'Available' ];\n\t\t\t\t};\n\n\t\t\t\tel_input_date_book.datepicker( 'option', 'beforeShowDay', function_anonymous_beforeShowDays );\n\t\t\t\tel_input_date_book.datepicker( 'option', 'onClose', function( date ) {\n\t\t\t\t\t$.fn.update_tour_total_price();\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Date checkin & checkout\n\t\tif ( el_tour_date_checkin_checkout.length > 0 ) {\n\t\t\tel_tour_date_check_in = el_tour_date_checkin_checkout.find( 'input[name=tour_date_check_in]' );\n\t\t\tel_tour_date_check_out = el_tour_date_checkin_checkout.find( 'input[name=tour_date_check_out]' );\n\n\t\t\tif ( jQuery().datepicker ) {\n\t\t\t\tel_tour_date_check_in.datepicker( option_date_picker );\n\n\t\t\t\tel_tour_date_check_in.datepicker( 'option', 'onClose', function( date ) {\n\t\t\t\t\t$.fn._show_range_dates_choose();\n\t\t\t\t\t// console.log(date);\n\t\t\t\t\tif ( date !== '' ) {\n\t\t\t\t\t\tconst date_next = new Date( $.fn._convert_date_to_format_default( date ) );\n\n\t\t\t\t\t\tdate_next.setDate( date_next.getDate() + 1 );\n\n\t\t\t\t\t\tel_tour_date_check_out.datepicker( 'option', 'minDate', date_next );\n\n\t\t\t\t\t\t$.fn.update_tour_total_price();\n\n\t\t\t\t\t\tif ( date !== $._tour_date_check_in_old ) {\n\t\t\t\t\t\t\t$._tour_date_check_in_old = date;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tel_tour_date_check_out.datepicker( {\n\t\t\t\t\tdateFormat: $._tour_date_format,\n\t\t\t\t\tminDate: date_min_can_book,\n\t\t\t\t\tyearRange: date_min_can_book.getFullYear() + ':' + $._max_year,\n\t\t\t\t} );\n\n\t\t\t\tel_tour_date_check_out.datepicker( 'option', 'onClose', function( date ) {\n\t\t\t\t\t$.fn._show_range_dates_choose();\n\t\t\t\t\t$.fn.update_tour_total_price();\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\t// Date checkin & checkout range\n\t\tel_tour_datepicker_range_checkin_checkout = el_tourBookingForm.find( '.tour-datepicker-range-checkin-checkout' );\n\t\tif ( el_tour_datepicker_range_checkin_checkout.length > 0 ) {\n\t\t\tel_input_tour_datepicker_range_checkin_checkout = el_tour_datepicker_range_checkin_checkout.find( 'input[name=tour_datepicker_range_checkin_checkout]' );\n\n\t\t\tconst option_datepicker_range = {\n\t\t\t\tminDate: date_min_can_book,\n\t\t\t\topens: 'left',\n\t\t\t\tdrops: 'up',\n\t\t\t\tlocale: {\n\t\t\t\t\tformat: $._date_format_default_datepicker_range,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tel_input_tour_datepicker_range_checkin_checkout.daterangepicker( option_datepicker_range, function( start, end ) {\n\t\t\t\t//console.log( start, end );\n\t\t\t} );\n\t\t}\n\n\t\tif ( el_field_travel_booking.length > 0 ) {\n\t\t\tel_field_travel_booking.on( 'change keyup', function( i ) {\n\t\t\t\t$.fn.update_tour_total_price();\n\t\t\t} );\n\t\t}\n\t};\n\n\t$.fn.get_price_tours_default = function() {\n\t\tprice_dates_tour.regular_price_dates = parseFloat( el_price_ticket.val() );\n\n\t\tif ( tour_have_children_ticket ) {\n\t\t\tprice_dates_tour.child_price_dates = parseFloat( el_price_children.val() );\n\t\t}\n\n\t\t// Variation\n\t\tif ( tour_variation_options ) {\n\t\t\t$.each( tour_variation_options, function( k_variation, variation ) {\n\t\t\t\tif ( variation.set_price == 1 && variation.enable == 1 ) {\n\t\t\t\t\tif ( ! price_dates_tour[ k_variation ] ) {\n\t\t\t\t\t\tprice_dates_tour[ k_variation ] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\t$.each( variation.variation_attr, function( k_attr, attribute ) {\n\t\t\t\t\t\tprice_dates_tour[ k_variation ][ k_attr ] = parseFloat( attribute.price );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t};\n\n\t$.fn.update_tour_total_price = function() {\n\t\t$.fn.get_price_tours_default();\n\n\t\tlet subtotal = 0;\n\t\tconst el_field_travel_booking = $( '.field-travel-booking' );\n\t\tlet total_person = 0;\n\t\tconst total_adult = parseInt( el_number_ticket.val() );\n\t\ttotal_person += total_adult;\n\n\t\tlet total_child = 0;\n\t\tif ( el_number_children.length ) {\n\t\t\ttotal_child = parseInt( el_number_children.val() );\n\t\t\ttotal_person += total_child;\n\t\t}\n\n\t\t/*** Get price by dates ***/\n\t\tconst isDateRangeFill = el_tour_date_check_in && el_tour_date_check_in.length && el_tour_date_check_out && el_tour_date_check_out.length &&\n\t\t\tel_tour_date_check_in.val() !== '' && el_tour_date_check_out.val() !== '';\n\n\t\tconst hasPriceDateTourOption = $._tour_price_of_dates_option && $._tour_price_of_dates_option.price_dates_range && ! $.isEmptyObject( $._tour_price_of_dates_option.price_dates_range );\n\n\t\tlet date_check_in;\n\t\tlet date_check_out;\n\t\tif ( el_input_date_book.length && el_input_date_book.val() !== '' ) { // is Fixed date\n\t\t\tconst duration = parseFloat( el_tour_duration_number.val() );\n\t\t\tdate_check_in = new Date( $.fn._convert_date_to_format_default( el_input_date_book.val() ) );\n\t\t\tdate_check_out = structuredClone(date_check_in);\n\t\t\tif ( duration > 1 ) {\n\t\t\t\tdate_check_out.setDate( date_check_out.getDate() + duration );\n\t\t\t} else if ( duration === 1 ) {\n\t\t\t\tdate_check_out.setDate( date_check_out.getDate() + 1 );\n\t\t\t}\n\t\t} else if ( isDateRangeFill ) {\n\t\t\tdate_check_in = new Date( $.fn._convert_date_to_format_default( el_tour_date_check_in.val() ) );\n\t\t\tdate_check_out = new Date( $.fn._convert_date_to_format_default( el_tour_date_check_out.val() ) );\n\t\t}\n\n\t\tif ( ! date_check_in ||  ! date_check_out ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet date_next = structuredClone(date_check_in);\n\t\tconst price_dates_tour_tmp = {};\n\n\t\t// Get total days\n\t\tconst total_night = $.fn._calculate_total_night( date_check_in, date_check_out );\n\t\t// let total_days = $.fn._calculate_total_days(date_check_in, date_check_out);\n\t\tconst el_number_day = $( '.number-day' );\n\t\tel_number_day.text( total_night );\n\n\t\twhile ( date_next < date_check_out ) {\n\t\t\tif ( hasPriceDateTourOption ) {\n\t\t\t\tconst dateExistsOption = [];\n\t\t\t\t$.each( $._tour_price_of_dates_option.price_dates_range, function( k_price_dates_range, price_dates_range ) {\n\t\t\t\t\tconst startDate = new Date( price_dates_range.start_date );\n\t\t\t\t\tconst endDate = new Date( price_dates_range.end_date );\n\n\t\t\t\t\tif ( date_next >= startDate && date_next <= endDate ) {\n\t\t\t\t\t\tdateExistsOption.push( date_next );\n\t\t\t\t\t\t$.each( price_dates_range.prices, function( k_price, v_price ) {\n\t\t\t\t\t\t\tif ( price_dates_tour[ k_price ] ) {\n\t\t\t\t\t\t\t\tif ( k_price === 'regular_price_dates' || k_price === 'child_price_dates' ) {\n\t\t\t\t\t\t\t\t\tlet price_attr = parseFloat( v_price.price );\n\n\t\t\t\t\t\t\t\t\tif ( isNaN( price_attr ) || price_attr <= 0 ) {\n\t\t\t\t\t\t\t\t\t\tprice_attr = price_dates_tour[ k_price ];\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ( ! price_dates_tour_tmp[ k_price ] ) {\n\t\t\t\t\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ] = price_attr;\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ] += price_attr;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t// Variations\n\t\t\t\t\t\t\t\t\t$.each( v_price, function( k_variation, variation_attr ) {\n\t\t\t\t\t\t\t\t\t\tif ( price_dates_tour[ k_price ][ k_variation ] ) {\n\t\t\t\t\t\t\t\t\t\t\tlet price_attr = parseFloat( variation_attr.price );\n\n\t\t\t\t\t\t\t\t\t\t\tif ( isNaN( price_attr ) || price_attr <= 0 ) {\n\t\t\t\t\t\t\t\t\t\t\t\tprice_attr = price_dates_tour[ k_price ][ k_variation ];\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif ( ! price_dates_tour_tmp[ k_price ] ) {\n\t\t\t\t\t\t\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ] = {};\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\tif ( ! price_dates_tour_tmp[ k_price ][ k_variation ] ) {\n\t\t\t\t\t\t\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ][ k_variation ] = price_attr;\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ][ k_variation ] += price_attr;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\t// get price regular\n\t\t\t\tif ( dateExistsOption.indexOf( date_next ) === -1 ) {\n\t\t\t\t\t$.fn.getPriceDatesDefaultByDateRange( price_dates_tour_tmp, price_dates_tour );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// get price regular\n\t\t\t\t$.fn.getPriceDatesDefaultByDateRange( price_dates_tour_tmp, price_dates_tour );\n\t\t\t}\n\n\t\t\tdate_next.setDate( date_next.getDate() + 1 );\n\t\t}\n\n\t\t// console.log(price_dates_tour_tmp);\n\n\t\t/*** Set total price days ***/\n\t\tprice_dates_tour.regular_price_dates = price_dates_tour_tmp.regular_price_dates;\n\t\tprice_dates_tour.child_price_dates = price_dates_tour_tmp.child_price_dates == undefined ? 0 : price_dates_tour_tmp.child_price_dates;\n\n\t\t// Variations\n\t\t//console.log(price_dates_tour);\n\t\t$.each( price_dates_tour, function( k_price, v_price ) {\n\t\t\tif ( k_price !== 'regular_price_dates' && k_price !== 'child_price_dates' ) {\n\t\t\t\t$.each( v_price, function( k_attr, v_attr ) {\n\t\t\t\t\tif ( price_dates_tour_tmp[ k_price ] && price_dates_tour_tmp[ k_price ][ k_attr ] ) {\n\t\t\t\t\t\tprice_dates_tour[ k_price ][ k_attr ] = price_dates_tour_tmp[ k_price ][ k_attr ];\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t\t/*** End set total price days ***/\n\n\t\t// console.log(price_dates_tour);\n\n\t\t/*** Get subtotal ***/\n\t\t$.each( price_dates_tour, function( k, v ) {\n\t\t\tif ( k == 'regular_price_dates' ) {\n\t\t\t\tconst totalPriceAdult = price_dates_tour[ k ] * total_adult;\n\t\t\t\tsubtotal += totalPriceAdult;\n\n\t\t\t\tel_show_price_ticket.text( $.fn.tour_price_format( price_dates_tour[ k ] ) );\n\t\t\t} else if ( k == 'child_price_dates' ) {\n\t\t\t\tconst totalPriceChild = price_dates_tour[ k ] * total_child;\n\t\t\t\tsubtotal += totalPriceChild;\n\n\t\t\t\tel_show_price_children.text( $.fn.tour_price_format( price_dates_tour[ k ] ) );\n\t\t\t} else {\n\t\t\t\t$.each( v, function( k_variation, k_attr ) {\n\t\t\t\t\tvar price_variation = price_dates_tour[ k ][ k_variation ];\n\n\t\t\t\t\tswitch ( tour_variation_options[ k ].type_variation ) {\n\t\t\t\t\tcase 'quantity':\n\t\t\t\t\t\tvar qtyVariation = parseInt( $( 'input[name=' + k_variation + ']' ).val() );\n\t\t\t\t\t\tvar totalPriceVariation = price_variation * qtyVariation;\n\t\t\t\t\t\tsubtotal += totalPriceVariation;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'checkbox':\n\t\t\t\t\t\tvar elVariation = $( 'input[name=' + k_variation + ']' );\n\n\t\t\t\t\t\tif ( elVariation.is( ':checked' ) ) {\n\t\t\t\t\t\t\tsubtotal += price_variation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'radio':\n\t\t\t\t\t\tvar elVariation = $( 'input[name=' + k + ']:checked' );\n\n\t\t\t\t\t\tif ( elVariation.val() == k_variation ) {\n\t\t\t\t\t\t\tvar price_variation = price_dates_tour[ k ][ k_variation ];\n\n\t\t\t\t\t\t\tsubtotal += price_variation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'select':\n\t\t\t\t\t\tvar k_attr_selected = $( 'select[name=' + k + ']' ).val();\n\n\t\t\t\t\t\tif ( k_attr_selected == k_variation && price_dates_tour[ k ][ k_attr_selected ] ) {\n\t\t\t\t\t\t\tsubtotal += price_variation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t$( '.price_' + k_variation ).text( $.fn.tour_price_format( price_variation ) );\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t// Group discount\n\t\tif ( tour_group_discount_data ) {\n\t\t\tconst el_show_val_discount = el_label_tour_group_discount.find( '.val-discount' );\n\t\t\tconst el_currency_group_discount = el_label_tour_group_discount.find( '.woocommerce-Price-currencySymbol' );\n\t\t\tconst el_show_total_people = el_label_tour_group_discount.find( '.total-people' );\n\n\t\t\ttry {\n\t\t\t\tlet customer_number_match = 0;\n\t\t\t\tlet discount_val = 0;\n\n\t\t\t\t$.each( tour_group_discount_data, function( k, v ) {\n\t\t\t\t\tconst number_customer = parseInt( v.number_customer );\n\n\t\t\t\t\tif ( number_customer <= total_person && customer_number_match < number_customer ) {\n\t\t\t\t\t\tcustomer_number_match = number_customer;\n\t\t\t\t\t\tdiscount_val = v.discount;\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tif ( customer_number_match !== 0 ) {\n\t\t\t\t\tconst patter = /\\%$/;\n\n\t\t\t\t\tel_show_val_discount.text( discount_val );\n\t\t\t\t\tel_show_total_people.text( total_person );\n\t\t\t\t\tel_label_tour_group_discount.show();\n\n\t\t\t\t\tif ( patter.test( discount_val ) ) {\n\t\t\t\t\t\tel_currency_group_discount.hide();\n\t\t\t\t\t\tdiscount_val = parseFloat( discount_val );\n\n\t\t\t\t\t\tsubtotal = subtotal - ( subtotal * discount_val / 100 );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdiscount_val = parseFloat( discount_val );\n\t\t\t\t\t\tel_show_val_discount.text( discount_val.toFixed( num_decimals ) );\n\t\t\t\t\t\tel_currency_group_discount.show();\n\t\t\t\t\t\tsubtotal = subtotal - discount_val;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tel_label_tour_group_discount.hide();\n\t\t\t\t}\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\t\t}\n\n\t\tel_show_total_price.text( $.fn.tour_price_format( subtotal ) );\n\t};\n\n\t$.fn.getPriceDatesDefaultByDateRange = function( price_dates_tour_tmp, price_dates_tour ) {\n\t\tif ( ! price_dates_tour_tmp.regular_price_dates ) {\n\t\t\tprice_dates_tour_tmp.regular_price_dates = price_dates_tour.regular_price_dates;\n\t\t} else {\n\t\t\tprice_dates_tour_tmp.regular_price_dates += price_dates_tour.regular_price_dates;\n\t\t}\n\n\t\tif ( ! price_dates_tour_tmp.child_price_dates ) {\n\t\t\tprice_dates_tour_tmp.child_price_dates = price_dates_tour.child_price_dates;\n\t\t} else {\n\t\t\tprice_dates_tour_tmp.child_price_dates += price_dates_tour.child_price_dates;\n\t\t}\n\n\t\t// Variation\n\t\t$.each( price_dates_tour, function( k_price, v_price ) {\n\t\t\tif ( k_price != 'regular_price_dates' && k_price != 'child_price_dates' ) {\n\t\t\t\t$.each( v_price, function( k_attr, v_attr ) {\n\t\t\t\t\tif ( ! price_dates_tour_tmp[ k_price ] ) {\n\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! price_dates_tour_tmp[ k_price ][ k_attr ] ) {\n\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ][ k_attr ] = price_dates_tour[ k_price ][ k_attr ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprice_dates_tour_tmp[ k_price ][ k_attr ] += price_dates_tour[ k_price ][ k_attr ];\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t};\n\n\t$.fn.tour_booking_submit = function() {\n\t\t$( '.btn-booking' ).on( 'click', function( e ) {\n\t\t\te.preventDefault();\n\t\t\tconst el_btn_booking = $( this );\n\t\t\tlet flag_errors = false;\n\t\t\tconst input_first_name = $( 'input[name=first_name]' );\n\t\t\tconst input_last_name = $( 'input[name=last_name]' );\n\t\t\tconst input_email = $( 'input[name=email_tour]' );\n\t\t\tconst input_phone = $( 'input[name=phone]' );\n\t\t\tconst input_qty = $( 'input[name=number_ticket]' );\n\t\t\tconst qty_tour = parseInt( input_qty.val() );\n\t\t\tconst tb_phys_ajax_url = $( 'input[name=url_home]' ).val();\n\t\t\tconst el_deposit_radio = $( 'input[name=deposit_radio]' );\n\t\t\tconst max_qty_per = parseInt( input_qty.attr( 'max' ) );\n\t\t\tconst el_tour_variation_item = $( '.tour-variation-item' );\n\t\t\t// let el_tour_variations_options = $('input[name=tour_variations_options]');\n\n\t\t\tif ( input_first_name.length > 0 ) {\n\t\t\t\tif ( input_first_name.val().length == 0 ) {\n\t\t\t\t\tinput_first_name.attr( 'placeholder', travel_booking.message_er_first_name );\n\t\t\t\t\tinput_first_name.addClass( 'error' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( input_last_name.length > 0 ) {\n\t\t\t\tif ( input_last_name.val().length == 0 ) {\n\t\t\t\t\tinput_last_name.attr( 'placeholder', travel_booking.message_er_last_name );\n\t\t\t\t\tinput_last_name.addClass( 'error' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( input_email.length > 0 ) {\n\t\t\t\tif ( ! checkValidateEmail( input_email.val() ) ) {\n\t\t\t\t\tinput_email.attr( 'placeholder', travel_booking.message_er_email );\n\t\t\t\t\tinput_email.addClass( 'error' );\n\t\t\t\t\tinput_email.val( '' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( input_phone.length > 0 ) {\n\t\t\t\tif ( input_phone.val().length == 0 ) {\n\t\t\t\t\tinput_phone.attr( 'placeholder', travel_booking.message_er_phone );\n\t\t\t\t\tinput_phone.addClass( 'error' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( el_input_date_book.length > 0 ) {\n\t\t\t\tif ( el_input_date_book.val().length == 0 ) {\n\t\t\t\t\tel_input_date_book.attr( 'placeholder', travel_booking.message_er_date );\n\t\t\t\t\tel_input_date_book.addClass( 'error' );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( isNaN( qty_tour ) || qty_tour <= 0 ) {\n\t\t\t\tinput_qty.val( 1 );\n\t\t\t} else if ( qty_tour > max_qty_per ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction checkValidateEmail( email ) {\n\t\t\t\tconst regex = /^([a-zA-Z0-9_.+-])+\\@(([a-zA-Z0-9-])+\\.)+([a-zA-Z0-9]{2,4})+$/;\n\t\t\t\treturn regex.test( email );\n\t\t\t}\n\n\t\t\t// run ajax add to cart\n\t\t\tif ( ! el_btn_booking.hasClass( 'disable' ) ) {\n\t\t\t\tconst data = {\n\t\t\t\t\tnonce: $( 'input[name=nonce]' ).val(),\n\t\t\t\t\ttour_id: $( 'input[name=tour_id]' ).val(),\n\t\t\t\t\tdate_booking: el_input_date_book.val(),\n\t\t\t\t};\n\n\t\t\t\tdata.number_ticket = input_qty.val();\n\n\t\t\t\t/*** Children ***/\n\t\t\t\tif ( el_number_children.length > 0 ) {\n\t\t\t\t\tlet number_children = el_number_children.val();\n\n\t\t\t\t\tif ( isNaN( number_children ) || parseFloat( number_children ) < 0 ) {\n\t\t\t\t\t\tnumber_children = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tdata.number_children = number_children;\n\t\t\t\t}\n\n\t\t\t\t/*** Variation ***/\n\t\t\t\tif ( el_tour_variations_options.length > 0 ) {\n\t\t\t\t\tdata.tour_variations = {};\n\n\t\t\t\t\t$.each( el_tour_variation_item, function( i ) {\n\t\t\t\t\t\tconst el_tour_variation_item = $( this );\n\t\t\t\t\t\tconst variation_id = el_tour_variation_item.data( 'variation-id' );\n\t\t\t\t\t\tconst variation_type = el_tour_variation_item.data( 'type_variation' );\n\t\t\t\t\t\tconst variation_required = parseInt( el_tour_variation_item.data( 'required' ) );\n\t\t\t\t\t\tconst el_variation_attr_field = el_tour_variation_item.find( '.field-travel-booking' );\n\t\t\t\t\t\tconst total_el_variation_attr_field = el_variation_attr_field.length;\n\t\t\t\t\t\tlet variation_attr_id = 0;\n\n\t\t\t\t\t\tif ( variation_type === 'quantity' && ! flag_errors ) {\n\t\t\t\t\t\t\tlet flag_error_variation_quantity = true;\n\n\t\t\t\t\t\t\t$.each( el_variation_attr_field, function( i ) {\n\t\t\t\t\t\t\t\tconst el_variation_attr_field = $( this );\n\t\t\t\t\t\t\t\tvariation_attr_id = parseInt( el_variation_attr_field.attr( 'name' ) );\n\n\t\t\t\t\t\t\t\tif ( parseFloat( el_variation_attr_field.val() ) > 0 ) {\n\t\t\t\t\t\t\t\t\tif ( data.tour_variations[ variation_id ] === undefined ) {\n\t\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ][ variation_attr_id ] = {};\n\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ][ variation_attr_id ].quantity = el_variation_attr_field.val();\n\n\t\t\t\t\t\t\t\t\tflag_error_variation_quantity = false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( variation_required ) {\n\t\t\t\t\t\t\t\t\tif ( flag_error_variation_quantity && i === total_el_variation_attr_field - 1 ) {\n\t\t\t\t\t\t\t\t\t\tflag_errors = true;\n\t\t\t\t\t\t\t\t\t\tel_tour_variation_item.addClass( 'errors' );\n\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\tel_tour_variation_item.removeClass( 'errors' );\n\t\t\t\t\t\t\t\t\t\t}, 2000 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else if ( variation_type === 'select' && ! flag_errors ) {\n\t\t\t\t\t\t\tconst el_variation_attr_field = el_tour_variation_item.find( '.field-travel-booking' );\n\t\t\t\t\t\t\tvariation_attr_id = parseInt( el_variation_attr_field.val() );\n\n\t\t\t\t\t\t\tif ( variation_attr_id > 0 ) {\n\t\t\t\t\t\t\t\tif ( data.tour_variations[ variation_id ] === undefined ) {\n\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ] = {};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ][ variation_attr_id ] = {};\n\t\t\t\t\t\t\t} else if ( variation_required ) {\n\t\t\t\t\t\t\t\tflag_errors = true;\n\t\t\t\t\t\t\t\tel_variation_attr_field.addClass( 'errors' );\n\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\tel_variation_attr_field.removeClass( 'errors' );\n\t\t\t\t\t\t\t\t}, 2000 );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if ( variation_type === 'checkbox' && ! flag_errors ) {\n\t\t\t\t\t\t\tlet flag_errors_variation_checkbox = true;\n\n\t\t\t\t\t\t\t$.each( el_variation_attr_field, function( i ) {\n\t\t\t\t\t\t\t\tconst el_variation_attr_field = $( this );\n\t\t\t\t\t\t\t\tif ( el_variation_attr_field.is( ':checked' ) ) {\n\t\t\t\t\t\t\t\t\tif ( data.tour_variations[ variation_id ] === undefined ) {\n\t\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvariation_attr_id = parseInt( el_variation_attr_field.val() );\n\n\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ][ variation_attr_id ] = {};\n\n\t\t\t\t\t\t\t\t\tflag_errors_variation_checkbox = false;\n\t\t\t\t\t\t\t\t\tflag_errors = false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( variation_required ) {\n\t\t\t\t\t\t\t\t\tif ( flag_errors_variation_checkbox && i === total_el_variation_attr_field - 1 ) {\n\t\t\t\t\t\t\t\t\t\tflag_errors = true;\n\t\t\t\t\t\t\t\t\t\tel_tour_variation_item.addClass( 'errors' );\n\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\tel_tour_variation_item.removeClass( 'errors' );\n\t\t\t\t\t\t\t\t\t\t}, 2000 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} else if ( variation_type === 'radio' && ! flag_errors ) {\n\t\t\t\t\t\t\tlet flag_errors_variation_radio = true;\n\n\t\t\t\t\t\t\t$.each( el_variation_attr_field, function( i ) {\n\t\t\t\t\t\t\t\tconst el_variation_attr_field = $( this );\n\n\t\t\t\t\t\t\t\tif ( el_variation_attr_field.is( ':checked' ) ) {\n\t\t\t\t\t\t\t\t\tif ( data.tour_variations[ variation_id ] === undefined ) {\n\t\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ] = {};\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvariation_attr_id = parseInt( el_variation_attr_field.val() );\n\t\t\t\t\t\t\t\t\tdata.tour_variations[ variation_id ][ variation_attr_id ] = {};\n\n\t\t\t\t\t\t\t\t\tflag_errors_variation_radio = false;\n\t\t\t\t\t\t\t\t\tflag_errors = false;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( variation_required ) {\n\t\t\t\t\t\t\t\t\tif ( flag_errors_variation_radio && i === total_el_variation_attr_field - 1 ) {\n\t\t\t\t\t\t\t\t\t\tflag_errors = true;\n\t\t\t\t\t\t\t\t\t\tel_tour_variation_item.addClass( 'errors' );\n\t\t\t\t\t\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\t\t\t\t\t\tel_tour_variation_item.removeClass( 'errors' );\n\t\t\t\t\t\t\t\t\t\t}, 2000 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\t//console.log( data.tour_variations );\n\n\t\t\t\t\tdata.tour_variations = JSON.stringify( ( data.tour_variations ) );\n\t\t\t\t}\n\n\t\t\t\t/*** Price dates ***/\n\t\t\t\tif ( el_tour_date_checkin_checkout.length > 0 ) {\n\t\t\t\t\tif ( el_tour_date_check_in.length > 0 && el_tour_date_check_out.length > 0 ) {\n\t\t\t\t\t\tif ( el_tour_date_check_in.val() === '' ) {\n\t\t\t\t\t\t\tel_tour_date_check_in.attr( 'placeholder', travel_booking.message_er_date_checkin );\n\t\t\t\t\t\t\tel_tour_date_check_in.addClass( 'error' );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( el_tour_date_check_out.val() === '' ) {\n\t\t\t\t\t\t\tel_tour_date_check_out.attr( 'placeholder', travel_booking.message_er_date_checkout );\n\t\t\t\t\t\t\tel_tour_date_check_out.addClass( 'error' );\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata.date_check_in = el_tour_date_check_in.val();\n\t\t\t\t\t\tdata.date_check_out = el_tour_date_check_out.val();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/*** Deposit ***/\n\t\t\t\tif ( el_tour_deposit.length > 0 ) {\n\t\t\t\t\t$.each( el_tour_deposit, function( i ) {\n\t\t\t\t\t\tif ( $( this ).is( ':checked' ) ) {\n\t\t\t\t\t\t\tdata.webtomizer_tour_deposit = $( this ).val();\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t// console.log(data);\n\t\t\t\t// return;\n\t\t\t\tconst custom_form_fields = el_tourBookingForm.find( '.form-field.custom-field *' );\n\n\t\t\t\tcustom_form_fields.each(function() {\n\t\t\t\t\tdata[$( this ).attr('name')] = $( this ).val();\n\t\t\t\t});\n\n\t\t\t\tif ( ! flag_errors ) {\n\t\t\t\t\t$( '.spinner' ).show();\n\t\t\t\t\tel_btn_booking.addClass( 'disable' );\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\turl: tb_phys_ajax_url + '?tb-ajax=add_tour_to_cart_phys',\n\t\t\t\t\t\ttype: 'post',\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tsuccess( result ) {\n\t\t\t\t\t\t\tif ( result.status === 'success' ) {\n\t\t\t\t\t\t\t\tconst user_info = {\n\t\t\t\t\t\t\t\t\tfirst_name: input_first_name.val(),\n\t\t\t\t\t\t\t\t\tlast_name: input_last_name.val(),\n\t\t\t\t\t\t\t\t\temail: input_email.val(),\n\t\t\t\t\t\t\t\t\tphone: input_phone.val(),\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tdocument.cookie = 'info_user=' + JSON.stringify( user_info ) + '; path=/';\n\t\t\t\t\t\t\t\twindow.location = $( 'input[name=checkout_url]' ).val();\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\talert( result.message );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, error( result ) {\n\t\t\t\t\t\t\tconsole.error( result );\n\t\t\t\t\t\t},\n\t\t\t\t\t} ).done( function() {\n\t\t\t\t\t\t$( '.spinner' ).hide();\n\t\t\t\t\t\tel_btn_booking.removeClass( 'disable' );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t};\n\n\t$.fn.tour_orderby = function() {\n\t\t$( '.tour-ordering' ).find( '.orderby' ).on( 'change', function() {\n\t\t\t$( '.tour-ordering' ).submit();\n\t\t} );\n\t};\n\n\t$.fn.load_ajax_notify = function() {\n\t\tload_notify = false;\n\t\tconst limit = $( 'input[name=notify_limit]' ).val();\n\t\tconst tb_phys_ajax_url = $( 'input[name=url_home]' ).val();\n\n\t\t$.ajax( {\n\t\t\turl: tb_phys_ajax_url + '?tb-ajax=notify_new_order',\n\t\t\ttype: 'post',\n\t\t\tdata: 'limit=' + limit,\n\t\t\tdataType: 'json',\n\t\t\tsuccess( result ) {\n\t\t\t\tif ( result.status == 'success' ) {\n\t\t\t\t\t$( '.list-order-tour' ).html( result.html );\n\t\t\t\t\tload_notify = true;\n\t\t\t\t}\n\t\t\t},\n\t\t} );\n\t};\n\n\t$.fn.load_notify_products_of_order = function() {\n\t\tconst notify_available = $( 'input[name=notify_available]' );\n\t\tif ( notify_available.length ) {\n\t\t\tload_notify = true;\n\t\t\tlet refresh = $( 'input[name=notify_refresh]' ).val();\n\t\t\tif ( refresh == '' ) {\n\t\t\t\trefresh = 10000;\n\t\t\t}\n\n\t\t\tsetInterval( function() {\n\t\t\t\tif ( load_notify ) {\n\t\t\t\t\t$.fn.load_ajax_notify();\n\t\t\t\t}\n\t\t\t}, refresh );\n\t\t}\n\t};\n\n\t$.fn._convert_date_to_format_default = function( date_string ) {\n\t\tlet date_convert = '';\n\t\tlet date = '';\n\t\tlet month = '';\n\t\tlet year = '';\n\t\tconst separator_date = '/';\n\n\t\tif ( $._tour_date_format === 'yy/mm/dd' ) {\n\t\t\tconst date_arr = date_string.split( '/' );\n\t\t\tdate = date_arr[ 2 ];\n\t\t\tmonth = date_arr[ 1 ];\n\t\t\tyear = date_arr[ 0 ];\n\t\t} else if ( $._tour_date_format === 'yy-mm-dd' ) {\n\t\t\tconst date_arr = date_string.split( '-' );\n\t\t\tdate = date_arr[ 2 ];\n\t\t\tmonth = date_arr[ 1 ];\n\t\t\tyear = date_arr[ 0 ];\n\t\t} else if ( $._tour_date_format === 'dd/mm/yy' ) {\n\t\t\tconst date_arr = date_string.split( '/' );\n\t\t\tdate = date_arr[ 0 ];\n\t\t\tmonth = date_arr[ 1 ];\n\t\t\tyear = date_arr[ 2 ];\n\t\t} else if ( $._tour_date_format === 'dd-mm-yy' ) {\n\t\t\tconst date_arr = date_string.split( '-' );\n\t\t\tdate = date_arr[ 0 ];\n\t\t\tmonth = date_arr[ 1 ];\n\t\t\tyear = date_arr[ 2 ];\n\t\t} else if ( $._tour_date_format === 'mm/dd/yy' ) {\n\t\t\tconst date_arr = date_string.split( '/' );\n\t\t\tdate = date_arr[ 1 ];\n\t\t\tmonth = date_arr[ 0 ];\n\t\t\tyear = date_arr[ 2 ];\n\t\t} else if ( $._tour_date_format === 'mm-dd-yy' ) {\n\t\t\tconst date_arr = date_string.split( '-' );\n\t\t\tdate = date_arr[ 1 ];\n\t\t\tmonth = date_arr[ 0 ];\n\t\t\tyear = date_arr[ 2 ];\n\t\t} else if ( $._tour_date_format === 'DD, d MM, yy' ) {\n\t\t\tconst date_arr = date_string.split( ',' );\n\t\t\tconst date_month_arr = date_arr[ 1 ].trim().split( ' ' );\n\t\t\tdate = date_month_arr[ 0 ];\n\t\t\tmonth = tour_month.indexOf( date_month_arr[ 1 ] ) + 1;\n\n\t\t\tif ( parseInt( month ) < 10 ) {\n\t\t\t\tmonth = '0' + month;\n\t\t\t}\n\n\t\t\tyear = date_arr[ 2 ];\n\t\t}\n\n\t\tdate_convert += year + separator_date + month + separator_date + date;\n\n\t\t// console.log(date_convert);\n\n\t\treturn date_convert;\n\t};\n\n\t$.fn._convert_date_obj_by_format_default = function( date_obj ) {\n\t\tlet date_convert = '';\n\t\tconst year = date_obj.getFullYear();\n\t\tconst month = ( '0' + ( date_obj.getMonth() + 1 ) ).slice( -2 );\n\t\tconst date = ( '0' + date_obj.getDate() ).slice( -2 );\n\n\t\tdate_convert += year + '/' + month + '/' + date;\n\n\t\treturn date_convert;\n\t};\n\n\t$.fn._calculate_total_days = function( start_date, end_date ) {\n\t\tconst start_date_obj = new Date( start_date );\n\t\tconst end_date_obj = new Date( end_date );\n\t\tconst date_next = start_date_obj;\n\t\tlet total_day = 0;\n\n\t\twhile ( date_next <= end_date_obj ) {\n\t\t\tdate_next.setDate( date_next.getDate() + 1 );\n\t\t\ttotal_day += 1;\n\t\t}\n\n\t\treturn total_day;\n\t};\n\n\t/**\n\t * Total night\n\t *\n\t * @param string start_date\n\t * @param start_date_obj\n\t * @param end_date_obj\n\t * @return {number}\n\t */\n\t$.fn._calculate_total_night = function( start_date_obj, end_date_obj ) {\n\t\tconst date_next = new Date( start_date_obj.getTime() );\n\t\tlet total_day = 0;\n\n\t\twhile ( date_next < end_date_obj ) {\n\t\t\tdate_next.setDate( date_next.getDate() + 1 );\n\t\t\ttotal_day += 1;\n\t\t}\n\n\t\treturn total_day;\n\t};\n\n\t$.fn._show_range_dates_choose = function() {\n\t\tconst tour_date_check_in = el_tour_date_check_in.val();\n\t\tconst tour_date_check_out = el_tour_date_check_out.val();\n\n\t\tif ( tour_date_check_in != '' && tour_date_check_out != '' ) {\n\t\t\t$._tour_dates_choose = [];\n\t\t\tconst start_date = new Date( $.fn._convert_date_to_format_default( el_tour_date_check_in.val() ) );\n\t\t\tconst end_date = new Date( $.fn._convert_date_to_format_default( el_tour_date_check_out.val() ) );\n\t\t\tconst date_next = start_date;\n\n\t\t\tend_date.setDate( end_date.getDate() + 1 );\n\n\t\t\twhile ( date_next < end_date ) {\n\t\t\t\t// console.log(date_next);\n\t\t\t\tconst date_string_by_format_default = $.fn._convert_date_obj_by_format_default( date_next );\n\t\t\t\t$._tour_dates_choose.push( date_string_by_format_default );\n\t\t\t\tdate_next.setDate( date_next.getDate() + 1 );\n\t\t\t}\n\n\t\t\tconst function_anonymous_beforeShowDay = function( date ) {\n\t\t\t\tdate = $.fn._convert_date_obj_by_format_default( date );\n\t\t\t\t// console.log(date);\n\t\t\t\tconst indexOf = $._tour_dates_choose.indexOf( date );\n\n\t\t\t\t// console.log(indexOf, indexOfDatesDisable)\n\t\t\t\tif ( $._dates_disable !== null ) {\n\t\t\t\t\tconst indexOfDatesDisable = $._dates_disable.indexOf( date );\n\n\t\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\t\tif ( indexOfDatesDisable > -1 ) {\n\t\t\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\t\t\treturn [ false, 'date-picked start-date', '' ];\n\t\t\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\t\t\treturn [ false, 'date-picked end-date', '' ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn [ false, 'date-picked', '' ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\t\treturn [ true, 'date-picked start-date', 'Available' ];\n\t\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\t\treturn [ true, 'date-picked end-date', 'Available' ];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [ true, 'date-picked', 'Available' ];\n\t\t\t\t\t}\n\t\t\t\t\tif ( indexOfDatesDisable > -1 ) {\n\t\t\t\t\t\treturn [ false, '', '' ];\n\t\t\t\t\t}\n\t\t\t\t\treturn [ true, '', 'Available' ];\n\t\t\t\t}\n\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\treturn [ true, 'date-picked start-date', '' ];\n\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\treturn [ true, 'date-picked end-date', '' ];\n\t\t\t\t\t}\n\t\t\t\t\treturn [ true, 'date-picked', '' ];\n\t\t\t\t}\n\t\t\t\treturn [ true, '', '' ];\n\t\t\t};\n\n\t\t\tconst function_anonymous_beforeShowDay_x = function( date ) {\n\t\t\t\tdate = $.fn._convert_date_obj_by_format_default( date );\n\t\t\t\t// console.log(date);\n\t\t\t\tconst indexOf = $._tour_dates_choose.indexOf( date );\n\n\t\t\t\t// console.log(indexOf, indexOfDatesDisable)\n\n\t\t\t\tif ( indexOf > -1 ) {\n\t\t\t\t\tif ( date == start_date ) {\n\t\t\t\t\t\treturn [ true, 'date-picked start-date', '' ];\n\t\t\t\t\t} else if ( date == end_date ) {\n\t\t\t\t\t\treturn [ true, 'date-picked end-date', '' ];\n\t\t\t\t\t}\n\t\t\t\t\treturn [ true, 'date-picked', '' ];\n\t\t\t\t}\n\t\t\t\treturn [ true, '', '' ];\n\t\t\t};\n\n\t\t\tif ( jQuery().datepicker ) {\n\t\t\t\tel_tour_date_check_in.datepicker( 'option', 'beforeShowDay', function_anonymous_beforeShowDay );\n\n\t\t\t\tel_tour_date_check_out.datepicker( 'option', 'beforeShowDay', function_anonymous_beforeShowDay_x );\n\t\t\t}\n\t\t}\n\n\t\t//console.log(start_date, end_date);\n\t};\n\n\t$.fn.filter_tour_price_widget = function() {\n\t\tconst el_tour_price_range = document.getElementById( 'tour-price-range' );\n\n\t\tif ( el_tour_price_range ) {\n\t\t\tconst el_tour_min_price_show = $( '.tour-min-price' );\n\t\t\tconst el_tour_max_price_show = $( '.tour-max-price' );\n\t\t\tconst tour_start_price_filter = parseFloat( $( 'input[name=tour_start_price_fitler]' ).val() );\n\t\t\tconst tour_end_price_filter = parseFloat( $( 'input[name=tour_end_price_filter]' ).val() );\n\t\t\tconst el_tour_max_price = $( 'input[name=tour_max_price]' );\n\t\t\tconst el_tour_min_price = $( 'input[name=tour_min_price]' );\n\t\t\tconst min_price = parseFloat( el_tour_min_price.val() );\n\t\t\tconst max_price = parseFloat( el_tour_max_price.val() );\n\n\t\t\t// console.log(min_price, max_price);\n\t\t\tif ( min_price < max_price ) {\n\t\t\t\tif ( ! el_tour_price_range.noUiSlider ) {\n\t\t\t\t\twindow.noUiSlider.create(el_tour_price_range, {\n\t\t\t\t\t\tstart: [min_price, max_price],\n\t\t\t\t\t\tconnect: true,\n\t\t\t\t\t\trange: {\n\t\t\t\t\t\t\tmin: tour_start_price_filter,\n\t\t\t\t\t\t\tmax: tour_end_price_filter,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tel_tour_price_range.noUiSlider.on( 'update', function( values ) {\n\t\t\t\t\t// console.log(values);\n\t\t\t\t\tconst min_price = values[ 0 ];\n\t\t\t\t\tconst max_price = values[ 1 ];\n\n\t\t\t\t\tel_tour_min_price.val( min_price );\n\t\t\t\t\tel_tour_max_price.val( max_price );\n\t\t\t\t\tel_tour_min_price_show.text( min_price );\n\t\t\t\t\tel_tour_max_price_show.text( max_price );\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\t};\n\t$.fn.tour_price_format = function (val) { \n\t\tval = val.toFixed(num_decimals);\n\t\tconst parts = val.split('.');\n\t\tif (travel_booking.thousand_separator) {\n\t\t\tparts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, travel_booking.thousand_separator);\n\t\t}\n\t\treturn parts.join(travel_booking.decimal_separator || '.');\n\t};\n\n\tfunction getCookie( cname ) {\n\t\tconst name = cname + '=';\n\t\tconst decodedCookie = decodeURIComponent( document.cookie );\n\t\tconst ca = decodedCookie.split( ';' );\n\t\tfor ( let i = 0; i < ca.length; i++ ) {\n\t\t\tlet c = ca[ i ];\n\t\t\twhile ( c.charAt( 0 ) == ' ' ) {\n\t\t\t\tc = c.substring( 1 );\n\t\t\t}\n\t\t\tif ( c.indexOf( name ) == 0 ) {\n\t\t\t\treturn c.substring( name.length, c.length );\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t}\n}( jQuery, 'tour-booking-phys' ) );\n\njQuery( function( $ ) {\n\t'use strict';\n\t$.fn.tour_booking_init();\n\t$.fn.tour_booking_submit();\n\t// $.fn.tour_orderby();\n\t$.fn.load_notify_products_of_order();\n\t$.fn.filter_tour_price_widget();\n\t$(document).ready(function() {\n        $.fn.update_tour_total_price();\n    });\n\n\tif ( $( '#tour_rating' ).length ) {\n\t\t$( '#tour_rating' ).barrating( {\n\t\t\ttheme: 'css-stars',\n\t\t} );\n\t}\n} );\n"],"names":["$","date_validate","date_can_book","tour_month","tour_days","date_book","load_notify","el_tourBookingForm","el_tour_date_checkin_checkout","el_tour_datepicker_range_checkin_checkout","el_input_tour_datepicker_range_checkin_checkout","el_number_ticket","el_price_ticket","el_show_price_ticket","el_number_children","el_price_children","el_show_price_children","el_field_travel_booking","el_input_date_book","tour_have_children_ticket","el_tour_date_starts_after","el_tour_duration_number","el_tour_group_discount_data_phys","tour_group_discount_data","el_label_tour_group_discount","el_tour_deposit","el_tour_variations_options","tour_variation_options","info_user","el_show_total_price","price_dates_tour","num_decimals","fn","tour_booking_init","getCookie","JSON","parse","length","_get_elms_tour_booking_form","tour_booking","val","first_name","last_name","email","phone","find","el_tour_month","split","_dates_disable","_max_year","_date_format_default","_date_format_default_datepicker_range","_tour_date_format","_date_format_convert_php_js","_tour_date_check_in_old","phys_tour_price_dates_type","el_tour_date_check_in","el_tour_date_check_out","_tour_price_of_dates_option","tour_date_starts_after","date_now","Date","date_min_can_book","el_phys_tour_dates_disable","el_phys_tour_max_year_enable","el_phys_tour_price_of_dates_option","e","update_tour_total_price","travel_booking","tour_date_format","undefined","parseInt","dateMinCanBookStr","_convert_date_obj_by_format_default","indexOf","setDate","getDate","option_date_picker","dateFormat","minDate","yearRange","getFullYear","beforeShowDay","date","jQuery","datepicker","duration","function_anonymous_beforeShowDays","_tour_dates_choose","date_start_obj","_convert_date_to_format_default","date_next","start_date","end_date_obj","end_date","date_string_by_format_default","push","indexOfDatesDisable","_show_range_dates_choose","option_datepicker_range","opens","drops","locale","format","daterangepicker","start","end","on","i","get_price_tours_default","regular_price_dates","parseFloat","child_price_dates","each","k_variation","variation","set_price","enable","variation_attr","k_attr","attribute","price","subtotal","total_person","total_adult","total_child","isDateRangeFill","hasPriceDateTourOption","price_dates_range","isEmptyObject","date_check_in","date_check_out","structuredClone","price_dates_tour_tmp","total_night","_calculate_total_night","el_number_day","text","dateExistsOption","k_price_dates_range","startDate","endDate","prices","k_price","v_price","price_attr","isNaN","getPriceDatesDefaultByDateRange","v_attr","k","v","totalPriceAdult","tour_price_format","totalPriceChild","price_variation","type_variation","qtyVariation","totalPriceVariation","elVariation","is","k_attr_selected","el_show_val_discount","el_currency_group_discount","el_show_total_people","customer_number_match","discount_val","number_customer","discount","patter","show","test","hide","toFixed","console","error","tour_booking_submit","preventDefault","el_btn_booking","flag_errors","input_first_name","input_last_name","input_email","input_phone","input_qty","qty_tour","tb_phys_ajax_url","el_deposit_radio","max_qty_per","attr","el_tour_variation_item","message_er_first_name","addClass","message_er_last_name","checkValidateEmail","message_er_email","message_er_phone","message_er_date","regex","hasClass","data","nonce","tour_id","date_booking","number_ticket","number_children","tour_variations","variation_id","variation_type","variation_required","el_variation_attr_field","total_el_variation_attr_field","variation_attr_id","flag_error_variation_quantity","quantity","setTimeout","removeClass","flag_errors_variation_checkbox","flag_errors_variation_radio","stringify","message_er_date_checkin","message_er_date_checkout","webtomizer_tour_deposit","custom_form_fields","ajax","url","type","dataType","success","result","status","user_info","document","cookie","window","location","alert","message","done","tour_orderby","submit","load_ajax_notify","limit","html","load_notify_products_of_order","notify_available","refresh","setInterval","date_string","date_convert","month","year","separator_date","date_arr","date_month_arr","trim","date_obj","getMonth","slice","_calculate_total_days","start_date_obj","total_day","getTime","tour_date_check_in","tour_date_check_out","function_anonymous_beforeShowDay","function_anonymous_beforeShowDay_x","filter_tour_price_widget","el_tour_price_range","getElementById","el_tour_min_price_show","el_tour_max_price_show","tour_start_price_filter","tour_end_price_filter","el_tour_max_price","el_tour_min_price","min_price","max_price","noUiSlider","create","connect","range","min","max","values","parts","thousand_separator","replace","join","decimal_separator","cname","name","decodedCookie","decodeURIComponent","ca","c","charAt","substring","ready","barrating","theme"],"sourceRoot":""}